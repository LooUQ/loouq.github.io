\hypertarget{ltemc-atcmd_8h}{}\doxysection{src/ltemc-\/atcmd.h File Reference}
\label{ltemc-atcmd_8h}\index{src/ltemc-\/atcmd.h@{src/ltemc-\/atcmd.h}}
{\ttfamily \#include $<$stddef.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structatcmd_history__tag}{atcmd\+History\+\_\+tag}}
\begin{DoxyCompactList}\small\item\em Record of last action, N\+O\+TE\+: only set on action N\+O\+N-\/\+S\+U\+C\+C\+E\+SS. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structatcmd__tag}{atcmd\+\_\+tag}}
\begin{DoxyCompactList}\small\item\em Structure to control invocation and management of an AT command with the B\+Gx module. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structatcmd_result__tag}{atcmd\+Result\+\_\+tag}}
\begin{DoxyCompactList}\small\item\em Result structure returned from a action request (await or get). \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{ltemc-atcmd_8h_a81784fe6d5bd911c07d757d903e9d211}{A\+C\+T\+I\+O\+N\+\_\+\+T\+I\+M\+E\+O\+U\+Tml}}~500
\begin{DoxyCompactList}\small\item\em Default number of millis to wait for action to complete, can be overridden in action\+\_\+try\+Invoke\+Adv() \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ltemc-atcmd_8h_a00cd00f7939acac055623b8506ec7ace}{R\+E\+S\+U\+L\+T\+\_\+\+C\+O\+D\+E\+\_\+\+P\+E\+N\+D\+I\+NG}}~0x\+F\+F\+FF
\begin{DoxyCompactList}\small\item\em Value returned from response parsers indicating a pattern match has not yet been detected. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{ltemc-atcmd_8h_a87296e98a752bfe51d208d309fb8b664}{A\+C\+T\+I\+O\+N\+\_\+\+H\+I\+S\+T\+R\+E\+S\+P\+B\+U\+F\+\_\+\+SZ}}~240
\begin{DoxyCompactList}\small\item\em Size of response captured by action history (action error diagnostics) \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{structatcmd_history__tag}{atcmd\+History\+\_\+tag}} \mbox{\hyperlink{ltemc-atcmd_8h_a202f5479dd8fdc8ba91965f37ae2187a}{atcmd\+History\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Record of last action, N\+O\+TE\+: only set on action N\+O\+N-\/\+S\+U\+C\+C\+E\+SS. \end{DoxyCompactList}\item 
typedef struct \mbox{\hyperlink{structatcmd__tag}{atcmd\+\_\+tag}} \mbox{\hyperlink{ltemc-atcmd_8h_a46359dab5bcffab8c23b412d093ce64e}{atcmd\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Structure to control invocation and management of an AT command with the B\+Gx module. \end{DoxyCompactList}\item 
typedef struct \mbox{\hyperlink{structatcmd_result__tag}{atcmd\+Result\+\_\+tag}} \mbox{\hyperlink{ltemc-atcmd_8h_ab9a28dd6dc94d1c92a647f1c9557d584}{atcmd\+Result\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Result structure returned from a action request (await or get). \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{ltemc-atcmd_8h_a868e0262f09a69e0cdc5ed00ff29ba76}{atcmd\+\_\+try\+Invoke}} (const char $\ast$cmd\+Str)
\begin{DoxyCompactList}\small\item\em Invokes a B\+Gx AT command with default action values. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{ltemc-atcmd_8h_a4771b8c38564ad226f691ea2e80954d1}{atcmd\+\_\+try\+Invoke\+Adv}} (const char $\ast$cmd\+Str, uint16\+\_\+t timeout, uint16\+\_\+t($\ast$custom\+Cmd\+Complete\+Parser\+\_\+func)(const char $\ast$response, char $\ast$$\ast$endptr))
\begin{DoxyCompactList}\small\item\em Invokes a B\+Gx AT command with application specified action values. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-atcmd_8h_a32f39d336d40498be2faa83623a2a33b}{atcmd\+\_\+send\+Raw}} (const char $\ast$data, uint16\+\_\+t data\+Sz, uint16\+\_\+t timeout\+Millis, uint16\+\_\+t($\ast$custom\+Cmd\+Complete\+Parser\+\_\+func)(const char $\ast$response, char $\ast$$\ast$endptr))
\begin{DoxyCompactList}\small\item\em Performs data transfer (send) sub-\/action. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-atcmd_8h_a83260c769f249919d63e0d40a3f43474}{atcmd\+\_\+send\+Raw\+With\+E\+O\+Ts}} (const char $\ast$data, uint16\+\_\+t data\+Sz, const char $\ast$eot\+Phrase, uint16\+\_\+t timeout\+Millis, uint16\+\_\+t($\ast$custom\+Cmd\+Complete\+Parser\+\_\+func)(const char $\ast$response, char $\ast$$\ast$endptr))
\begin{DoxyCompactList}\small\item\em Performs data transfer (send) sub-\/action. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ltemc-atcmd_8h_ab9a28dd6dc94d1c92a647f1c9557d584}{atcmd\+Result\+\_\+t}} \mbox{\hyperlink{ltemc-atcmd_8h_a4d1dd1f7cd53b5b4bb02985f351c7af1}{atcmd\+\_\+await\+Result}} (bool close\+Action)
\begin{DoxyCompactList}\small\item\em Waits for an AT command result until completed response or timeout. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ltemc-atcmd_8h_ab9a28dd6dc94d1c92a647f1c9557d584}{atcmd\+Result\+\_\+t}} \mbox{\hyperlink{ltemc-atcmd_8h_a6409bc1efcf200bf70e6371af23649d5}{atcmd\+\_\+get\+Result}} (bool close\+Action)
\begin{DoxyCompactList}\small\item\em Gets command response and returns immediately. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{ltemc-atcmd_8h_a4ebff35eeb105c5536cdb994d11d2573}{actn\+\_\+acquire\+Lock}} (const char $\ast$cmd\+Str, uint8\+\_\+t retries)
\item 
void \mbox{\hyperlink{ltemc-atcmd_8h_a74edf80fef3ee4cfaebbb9607ca58a78}{atcmd\+\_\+close}} ()
\begin{DoxyCompactList}\small\item\em Closes (completes) a B\+Gx AT command structure and frees action resource (release action lock). \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-atcmd_8h_a3742317e3225c92af7b6487aee1c3f38}{atcmd\+\_\+exit\+Text\+Mode}} ()
\begin{DoxyCompactList}\small\item\em Sends E\+SC character to ensure B\+Gx is not in text mode ($>$ prompt awaiting $^\wedge$\+Z/\+E\+SC). \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-atcmd_8h_ac9151ae79098ea2379de42f180114825}{atcmd\+\_\+exit\+Data\+Mode}} ()
\begin{DoxyCompactList}\small\item\em Sends +++ sequence to transition B\+Gx out of data mode to command mode. \end{DoxyCompactList}\item 
\mbox{\hyperlink{lq_types_8h_a700eddbbbf80623f66eb7ae253ecd887}{result\+Code\+\_\+t}} \mbox{\hyperlink{ltemc-atcmd_8h_a9a916570d5a50d33bff2bcc3d642c295}{atcmd\+\_\+ok\+Result\+Parser}} (const char $\ast$response, char $\ast$$\ast$endptr)
\begin{DoxyCompactList}\small\item\em Validate the response ends in a B\+Gxx OK value. \end{DoxyCompactList}\item 
\mbox{\hyperlink{lq_types_8h_a700eddbbbf80623f66eb7ae253ecd887}{result\+Code\+\_\+t}} \mbox{\hyperlink{ltemc-atcmd_8h_a5c2cd70cbeeec988b96bf2316c457132}{atcmd\+\_\+default\+Result\+Parser}} (const char $\ast$response, const char $\ast$landmark, bool landmark\+Reqd, uint8\+\_\+t gap, const char $\ast$terminator, char $\ast$$\ast$endptr)
\begin{DoxyCompactList}\small\item\em Performs a standardized parse of command responses. This function can be wrapped to match atcmd command\+Completed\+Parse signature. \end{DoxyCompactList}\item 
\mbox{\hyperlink{lq_types_8h_a700eddbbbf80623f66eb7ae253ecd887}{result\+Code\+\_\+t}} \mbox{\hyperlink{ltemc-atcmd_8h_a244eb8803908887ff13210c9e6bec0b4}{atcmd\+\_\+token\+Result\+Parser}} (const char $\ast$response, const char $\ast$landmark, char token, uint8\+\_\+t reqd\+Tokens, const char $\ast$terminator, char $\ast$$\ast$endptr)
\begin{DoxyCompactList}\small\item\em Performs a standardized parse of command responses. This function can be wrapped to match atcmd command\+Completed\+Parse signature. \end{DoxyCompactList}\item 
\mbox{\hyperlink{lq_types_8h_a700eddbbbf80623f66eb7ae253ecd887}{result\+Code\+\_\+t}} \mbox{\hyperlink{ltemc-atcmd_8h_ac9206837d518cdb18199abdaef3551c4}{atcmd\+\_\+service\+Response\+Parser}} (const char $\ast$response, const char $\ast$landmark, uint8\+\_\+t result\+Indx, char $\ast$$\ast$endptr)
\begin{DoxyCompactList}\small\item\em Parser for open connection response, shared by U\+D\+P/\+T\+C\+P/\+S\+S\+L/\+M\+Q\+TT. \end{DoxyCompactList}\item 
char $\ast$ \mbox{\hyperlink{ltemc-atcmd_8h_a99badffb679e0d7b90c042dc93e57771}{atcmd\+\_\+str\+Token}} (char $\ast$source, int delimiter, char $\ast$token, uint8\+\_\+t token\+Max)
\begin{DoxyCompactList}\small\item\em C-\/string token grabber. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{ltemc-atcmd_8h_a966265080bf43726bccb503cfb4103cc}{atcmd\+\_\+\+\_\+acquire\+Lock}} (const char $\ast$cmd\+Str, uint8\+\_\+t retries)
\begin{DoxyCompactList}\small\item\em Attempts to get exclusive access to Q\+BG module command interface. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{ltemc-atcmd_8h_a87296e98a752bfe51d208d309fb8b664}\label{ltemc-atcmd_8h_a87296e98a752bfe51d208d309fb8b664}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!ACTION\_HISTRESPBUF\_SZ@{ACTION\_HISTRESPBUF\_SZ}}
\index{ACTION\_HISTRESPBUF\_SZ@{ACTION\_HISTRESPBUF\_SZ}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{ACTION\_HISTRESPBUF\_SZ}{ACTION\_HISTRESPBUF\_SZ}}
{\footnotesize\ttfamily \#define A\+C\+T\+I\+O\+N\+\_\+\+H\+I\+S\+T\+R\+E\+S\+P\+B\+U\+F\+\_\+\+SZ~240}



Size of response captured by action history (action error diagnostics) 

\mbox{\Hypertarget{ltemc-atcmd_8h_a81784fe6d5bd911c07d757d903e9d211}\label{ltemc-atcmd_8h_a81784fe6d5bd911c07d757d903e9d211}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!ACTION\_TIMEOUTml@{ACTION\_TIMEOUTml}}
\index{ACTION\_TIMEOUTml@{ACTION\_TIMEOUTml}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{ACTION\_TIMEOUTml}{ACTION\_TIMEOUTml}}
{\footnotesize\ttfamily \#define A\+C\+T\+I\+O\+N\+\_\+\+T\+I\+M\+E\+O\+U\+Tml~500}



Default number of millis to wait for action to complete, can be overridden in action\+\_\+try\+Invoke\+Adv() 

\mbox{\Hypertarget{ltemc-atcmd_8h_a00cd00f7939acac055623b8506ec7ace}\label{ltemc-atcmd_8h_a00cd00f7939acac055623b8506ec7ace}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!RESULT\_CODE\_PENDING@{RESULT\_CODE\_PENDING}}
\index{RESULT\_CODE\_PENDING@{RESULT\_CODE\_PENDING}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{RESULT\_CODE\_PENDING}{RESULT\_CODE\_PENDING}}
{\footnotesize\ttfamily \#define R\+E\+S\+U\+L\+T\+\_\+\+C\+O\+D\+E\+\_\+\+P\+E\+N\+D\+I\+NG~0x\+F\+F\+FF}



Value returned from response parsers indicating a pattern match has not yet been detected. 



\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{ltemc-atcmd_8h_a46359dab5bcffab8c23b412d093ce64e}\label{ltemc-atcmd_8h_a46359dab5bcffab8c23b412d093ce64e}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmd\_t@{atcmd\_t}}
\index{atcmd\_t@{atcmd\_t}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmd\_t}{atcmd\_t}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structatcmd__tag}{atcmd\+\_\+tag}} \mbox{\hyperlink{ltemc-atcmd_8h_a46359dab5bcffab8c23b412d093ce64e}{atcmd\+\_\+t}}}



Structure to control invocation and management of an AT command with the B\+Gx module. 

\mbox{\Hypertarget{ltemc-atcmd_8h_a202f5479dd8fdc8ba91965f37ae2187a}\label{ltemc-atcmd_8h_a202f5479dd8fdc8ba91965f37ae2187a}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmdHistory\_t@{atcmdHistory\_t}}
\index{atcmdHistory\_t@{atcmdHistory\_t}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmdHistory\_t}{atcmdHistory\_t}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structatcmd_history__tag}{atcmd\+History\+\_\+tag}} \mbox{\hyperlink{ltemc-atcmd_8h_a202f5479dd8fdc8ba91965f37ae2187a}{atcmd\+History\+\_\+t}}}



Record of last action, N\+O\+TE\+: only set on action N\+O\+N-\/\+S\+U\+C\+C\+E\+SS. 

\mbox{\Hypertarget{ltemc-atcmd_8h_ab9a28dd6dc94d1c92a647f1c9557d584}\label{ltemc-atcmd_8h_ab9a28dd6dc94d1c92a647f1c9557d584}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmdResult\_t@{atcmdResult\_t}}
\index{atcmdResult\_t@{atcmdResult\_t}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmdResult\_t}{atcmdResult\_t}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structatcmd_result__tag}{atcmd\+Result\+\_\+tag}} \mbox{\hyperlink{ltemc-atcmd_8h_ab9a28dd6dc94d1c92a647f1c9557d584}{atcmd\+Result\+\_\+t}}}



Result structure returned from a action request (await or get). 



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{ltemc-atcmd_8h_a4ebff35eeb105c5536cdb994d11d2573}\label{ltemc-atcmd_8h_a4ebff35eeb105c5536cdb994d11d2573}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!actn\_acquireLock@{actn\_acquireLock}}
\index{actn\_acquireLock@{actn\_acquireLock}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{actn\_acquireLock()}{actn\_acquireLock()}}
{\footnotesize\ttfamily bool actn\+\_\+acquire\+Lock (\begin{DoxyParamCaption}\item[{const char $\ast$}]{cmd\+Str,  }\item[{uint8\+\_\+t}]{retries }\end{DoxyParamCaption})}

\mbox{\Hypertarget{ltemc-atcmd_8h_a966265080bf43726bccb503cfb4103cc}\label{ltemc-atcmd_8h_a966265080bf43726bccb503cfb4103cc}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmd\_\_acquireLock@{atcmd\_\_acquireLock}}
\index{atcmd\_\_acquireLock@{atcmd\_\_acquireLock}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmd\_\_acquireLock()}{atcmd\_\_acquireLock()}}
{\footnotesize\ttfamily bool atcmd\+\_\+\+\_\+acquire\+Lock (\begin{DoxyParamCaption}\item[{const char $\ast$}]{cmd\+Str,  }\item[{uint8\+\_\+t}]{retries }\end{DoxyParamCaption})}



Attempts to get exclusive access to Q\+BG module command interface. 


\begin{DoxyParams}{Parameters}
{\em cmd\+Str} & \mbox{[}in\mbox{]} -\/ The AT command text. \\
\hline
{\em retries} & \mbox{[}in\mbox{]} -\/ Number of retries to be attempted, while obtaining lock. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc-atcmd_8h_a4d1dd1f7cd53b5b4bb02985f351c7af1}\label{ltemc-atcmd_8h_a4d1dd1f7cd53b5b4bb02985f351c7af1}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmd\_awaitResult@{atcmd\_awaitResult}}
\index{atcmd\_awaitResult@{atcmd\_awaitResult}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmd\_awaitResult()}{atcmd\_awaitResult()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ltemc-atcmd_8h_ab9a28dd6dc94d1c92a647f1c9557d584}{atcmd\+Result\+\_\+t}} atcmd\+\_\+await\+Result (\begin{DoxyParamCaption}\item[{bool}]{auto\+Close\+Action }\end{DoxyParamCaption})}



Waits for an AT command result until completed response or timeout. 


\begin{DoxyParams}{Parameters}
{\em auto\+Close\+Action} & \mbox{[}in\mbox{]} U\+SE W\+I\+TH C\+A\+U\+T\+I\+ON -\/ On result, close the action. The caller only needs the status code.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Action result. W\+A\+R\+N\+I\+NG -\/ the action\+Result.\+response contents are undetermined after close. 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-atcmd_8h_a74edf80fef3ee4cfaebbb9607ca58a78}\label{ltemc-atcmd_8h_a74edf80fef3ee4cfaebbb9607ca58a78}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmd\_close@{atcmd\_close}}
\index{atcmd\_close@{atcmd\_close}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmd\_close()}{atcmd\_close()}}
{\footnotesize\ttfamily void atcmd\+\_\+close (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Closes (completes) a B\+Gx AT command structure and frees action resource (release action lock). 

\mbox{\Hypertarget{ltemc-atcmd_8h_a5c2cd70cbeeec988b96bf2316c457132}\label{ltemc-atcmd_8h_a5c2cd70cbeeec988b96bf2316c457132}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmd\_defaultResultParser@{atcmd\_defaultResultParser}}
\index{atcmd\_defaultResultParser@{atcmd\_defaultResultParser}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmd\_defaultResultParser()}{atcmd\_defaultResultParser()}}
{\footnotesize\ttfamily \mbox{\hyperlink{lq_types_8h_a700eddbbbf80623f66eb7ae253ecd887}{result\+Code\+\_\+t}} atcmd\+\_\+default\+Result\+Parser (\begin{DoxyParamCaption}\item[{const char $\ast$}]{response,  }\item[{const char $\ast$}]{preamble,  }\item[{bool}]{preamble\+Reqd,  }\item[{uint8\+\_\+t}]{gap\+Reqd,  }\item[{const char $\ast$}]{terminator,  }\item[{char $\ast$$\ast$}]{endptr }\end{DoxyParamCaption})}



Performs a standardized parse of command responses. This function can be wrapped to match atcmd command\+Completed\+Parse signature. 


\begin{DoxyParams}{Parameters}
{\em response} & \mbox{[}in\mbox{]} -\/ The string returned from the get\+Result function. \\
\hline
{\em preamble} & \mbox{[}in\mbox{]} -\/ The string to look for to signal start of response match. \\
\hline
{\em preamble\+Reqd} & \mbox{[}in\mbox{]} -\/ The preamble string is required, set to false to search for only gap and terminator \\
\hline
{\em gap\+Reqd} & \mbox{[}in\mbox{]} -\/ The minimum char count between preamble (or start) and terminator (0 is valid). \\
\hline
{\em terminator} & \mbox{[}in\mbox{]} -\/ The string to signal the end of the command response. \\
\hline
{\em endptr} & \mbox{[}out\mbox{]} -\/ Char pointer to the next char in response after parser match\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
H\+T\+TP style result code, 0 if parser incomplete (need more response). OK = 200. 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-atcmd_8h_ac9151ae79098ea2379de42f180114825}\label{ltemc-atcmd_8h_ac9151ae79098ea2379de42f180114825}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmd\_exitDataMode@{atcmd\_exitDataMode}}
\index{atcmd\_exitDataMode@{atcmd\_exitDataMode}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmd\_exitDataMode()}{atcmd\_exitDataMode()}}
{\footnotesize\ttfamily void atcmd\+\_\+exit\+Data\+Mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Sends +++ sequence to transition B\+Gx out of data mode to command mode. 

\mbox{\Hypertarget{ltemc-atcmd_8h_a3742317e3225c92af7b6487aee1c3f38}\label{ltemc-atcmd_8h_a3742317e3225c92af7b6487aee1c3f38}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmd\_exitTextMode@{atcmd\_exitTextMode}}
\index{atcmd\_exitTextMode@{atcmd\_exitTextMode}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmd\_exitTextMode()}{atcmd\_exitTextMode()}}
{\footnotesize\ttfamily void atcmd\+\_\+exit\+Text\+Mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Sends E\+SC character to ensure B\+Gx is not in text mode ($>$ prompt awaiting $^\wedge$\+Z/\+E\+SC). 

\mbox{\Hypertarget{ltemc-atcmd_8h_a6409bc1efcf200bf70e6371af23649d5}\label{ltemc-atcmd_8h_a6409bc1efcf200bf70e6371af23649d5}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmd\_getResult@{atcmd\_getResult}}
\index{atcmd\_getResult@{atcmd\_getResult}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmd\_getResult()}{atcmd\_getResult()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ltemc-atcmd_8h_ab9a28dd6dc94d1c92a647f1c9557d584}{atcmd\+Result\+\_\+t}} atcmd\+\_\+get\+Result (\begin{DoxyParamCaption}\item[{bool}]{close\+Action }\end{DoxyParamCaption})}



Gets command response and returns immediately. 


\begin{DoxyParams}{Parameters}
{\em close\+Action} & \mbox{[}in\mbox{]} -\/ U\+SE W\+I\+TH C\+A\+U\+T\+I\+ON -\/ On result, close the action. The caller only needs the status code.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Action result. W\+A\+R\+N\+I\+NG -\/ the action\+Result.\+response contents are undetermined after close. 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-atcmd_8h_a9a916570d5a50d33bff2bcc3d642c295}\label{ltemc-atcmd_8h_a9a916570d5a50d33bff2bcc3d642c295}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmd\_okResultParser@{atcmd\_okResultParser}}
\index{atcmd\_okResultParser@{atcmd\_okResultParser}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmd\_okResultParser()}{atcmd\_okResultParser()}}
{\footnotesize\ttfamily \mbox{\hyperlink{lq_types_8h_a700eddbbbf80623f66eb7ae253ecd887}{result\+Code\+\_\+t}} atcmd\+\_\+ok\+Result\+Parser (\begin{DoxyParamCaption}\item[{const char $\ast$}]{response,  }\item[{char $\ast$$\ast$}]{endptr }\end{DoxyParamCaption})}



Validate the response ends in a B\+Gxx OK value. 


\begin{DoxyParams}{Parameters}
{\em response} & \mbox{[}in\mbox{]} -\/ Pointer to the command response received from the B\+Gx. \\
\hline
{\em endptr} & \mbox{[}out\mbox{]} -\/ Char pointer to the next char in response after parser match\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool If the response string ends in a valid OK sequence 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-atcmd_8h_a32f39d336d40498be2faa83623a2a33b}\label{ltemc-atcmd_8h_a32f39d336d40498be2faa83623a2a33b}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmd\_sendRaw@{atcmd\_sendRaw}}
\index{atcmd\_sendRaw@{atcmd\_sendRaw}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmd\_sendRaw()}{atcmd\_sendRaw()}}
{\footnotesize\ttfamily void atcmd\+\_\+send\+Raw (\begin{DoxyParamCaption}\item[{const char $\ast$}]{data,  }\item[{uint16\+\_\+t}]{data\+Sz,  }\item[{uint16\+\_\+t}]{timeout\+Millis,  }\item[{uint16\+\_\+t($\ast$)(const char $\ast$response, char $\ast$$\ast$endptr)}]{task\+Complete\+Parser\+\_\+func }\end{DoxyParamCaption})}



Performs data transfer (send) sub-\/action. 


\begin{DoxyParams}{Parameters}
{\em data} & \mbox{[}in\mbox{]} -\/ Pointer to the block of binary data to send. \\
\hline
{\em data\+Sz} & \mbox{[}in\mbox{]} -\/ The size of the data block. \\
\hline
{\em timeout\+Millis} & \mbox{[}in\mbox{]} -\/ Timeout period (in millisecs) for send to complete. \\
\hline
{\em task\+Complete\+Parser\+\_\+func} & \mbox{[}in\mbox{]} -\/ Function pointer to parser looking for task completion \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc-atcmd_8h_a83260c769f249919d63e0d40a3f43474}\label{ltemc-atcmd_8h_a83260c769f249919d63e0d40a3f43474}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmd\_sendRawWithEOTs@{atcmd\_sendRawWithEOTs}}
\index{atcmd\_sendRawWithEOTs@{atcmd\_sendRawWithEOTs}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmd\_sendRawWithEOTs()}{atcmd\_sendRawWithEOTs()}}
{\footnotesize\ttfamily void atcmd\+\_\+send\+Raw\+With\+E\+O\+Ts (\begin{DoxyParamCaption}\item[{const char $\ast$}]{data,  }\item[{uint16\+\_\+t}]{data\+Sz,  }\item[{const char $\ast$}]{eot\+Phrase,  }\item[{uint16\+\_\+t}]{timeout\+Millis,  }\item[{uint16\+\_\+t($\ast$)(const char $\ast$response, char $\ast$$\ast$endptr)}]{task\+Complete\+Parser\+\_\+func }\end{DoxyParamCaption})}



Performs data transfer (send) sub-\/action. 


\begin{DoxyParams}{Parameters}
{\em data} & \mbox{[}in\mbox{]} -\/ Pointer to the block of binary data to send. \\
\hline
{\em data\+Sz} & \mbox{[}in\mbox{]} -\/ The size of the data block. \\
\hline
{\em eot\+Phrase} & \mbox{[}in\mbox{]} -\/ Char string that is sent a the end-\/of-\/transmission. \\
\hline
{\em timeout\+Millis} & \mbox{[}in\mbox{]} -\/ Timeout period (in millisecs) for send to complete. \\
\hline
{\em task\+Complete\+Parser\+\_\+func} & \mbox{[}in\mbox{]} -\/ Function pointer to parser looking for task completion \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc-atcmd_8h_ac9206837d518cdb18199abdaef3551c4}\label{ltemc-atcmd_8h_ac9206837d518cdb18199abdaef3551c4}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmd\_serviceResponseParser@{atcmd\_serviceResponseParser}}
\index{atcmd\_serviceResponseParser@{atcmd\_serviceResponseParser}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmd\_serviceResponseParser()}{atcmd\_serviceResponseParser()}}
{\footnotesize\ttfamily \mbox{\hyperlink{lq_types_8h_a700eddbbbf80623f66eb7ae253ecd887}{result\+Code\+\_\+t}} atcmd\+\_\+service\+Response\+Parser (\begin{DoxyParamCaption}\item[{const char $\ast$}]{response,  }\item[{const char $\ast$}]{preamble,  }\item[{uint8\+\_\+t}]{result\+Indx,  }\item[{char $\ast$$\ast$}]{endptr }\end{DoxyParamCaption})}



Parser for open connection response, shared by U\+D\+P/\+T\+C\+P/\+S\+S\+L/\+M\+Q\+TT. 


\begin{DoxyParams}{Parameters}
{\em response} & \mbox{[}in\mbox{]} -\/ Pointer to the command response received from the B\+Gx. \\
\hline
{\em preamble} & \mbox{[}in\mbox{]} -\/ Pointer to a landmark phrase to look for in the response \\
\hline
{\em result\+Indx} & \mbox{[}in\mbox{]} -\/ Zero based index after landmark of numeric fields to find result \\
\hline
{\em endptr} & \mbox{[}out\mbox{]} -\/ Pointer to character in response following parser match \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc-atcmd_8h_a99badffb679e0d7b90c042dc93e57771}\label{ltemc-atcmd_8h_a99badffb679e0d7b90c042dc93e57771}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmd\_strToken@{atcmd\_strToken}}
\index{atcmd\_strToken@{atcmd\_strToken}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmd\_strToken()}{atcmd\_strToken()}}
{\footnotesize\ttfamily char$\ast$ atcmd\+\_\+str\+Token (\begin{DoxyParamCaption}\item[{char $\ast$}]{source,  }\item[{int}]{delimiter,  }\item[{char $\ast$}]{token,  }\item[{uint8\+\_\+t}]{token\+Max }\end{DoxyParamCaption})}



C-\/string token grabber. 

\mbox{\Hypertarget{ltemc-atcmd_8h_a244eb8803908887ff13210c9e6bec0b4}\label{ltemc-atcmd_8h_a244eb8803908887ff13210c9e6bec0b4}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmd\_tokenResultParser@{atcmd\_tokenResultParser}}
\index{atcmd\_tokenResultParser@{atcmd\_tokenResultParser}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmd\_tokenResultParser()}{atcmd\_tokenResultParser()}}
{\footnotesize\ttfamily \mbox{\hyperlink{lq_types_8h_a700eddbbbf80623f66eb7ae253ecd887}{result\+Code\+\_\+t}} atcmd\+\_\+token\+Result\+Parser (\begin{DoxyParamCaption}\item[{const char $\ast$}]{response,  }\item[{const char $\ast$}]{preamble,  }\item[{char}]{delim,  }\item[{uint8\+\_\+t}]{reqd\+Tokens,  }\item[{const char $\ast$}]{terminator,  }\item[{char $\ast$$\ast$}]{endptr }\end{DoxyParamCaption})}



Performs a standardized parse of command responses. This function can be wrapped to match atcmd command\+Completed\+Parse signature. 


\begin{DoxyParams}{Parameters}
{\em response} & \mbox{[}in\mbox{]} -\/ The string returned from the get\+Result function. \\
\hline
{\em preamble} & \mbox{[}in\mbox{]} -\/ The string to look for to signal response matches command (scans from end backwards). \\
\hline
{\em delim} & \mbox{[}in\mbox{]} -\/ The token delimeter char. \\
\hline
{\em reqd\+Tokens} & \mbox{[}in\mbox{]} -\/ The minimum number of tokens expected. \\
\hline
{\em terminator} & \mbox{[}in\mbox{]} -\/ Text to look for indicating the sucessful end of command response. \\
\hline
{\em endptr} & \mbox{[}out\mbox{]} -\/ Char pointer to the next char in response after parser match\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if the response meets the conditions in the preamble and token count required. 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-atcmd_8h_a868e0262f09a69e0cdc5ed00ff29ba76}\label{ltemc-atcmd_8h_a868e0262f09a69e0cdc5ed00ff29ba76}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmd\_tryInvoke@{atcmd\_tryInvoke}}
\index{atcmd\_tryInvoke@{atcmd\_tryInvoke}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmd\_tryInvoke()}{atcmd\_tryInvoke()}}
{\footnotesize\ttfamily bool atcmd\+\_\+try\+Invoke (\begin{DoxyParamCaption}\item[{const char $\ast$}]{cmd\+Str }\end{DoxyParamCaption})}



Invokes a B\+Gx AT command with default action values. 


\begin{DoxyParams}{Parameters}
{\em cmd\+Str} & \mbox{[}in\mbox{]} The command string to send to the B\+G96 module.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if action was invoked, false if not 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-atcmd_8h_a4771b8c38564ad226f691ea2e80954d1}\label{ltemc-atcmd_8h_a4771b8c38564ad226f691ea2e80954d1}} 
\index{ltemc-\/atcmd.h@{ltemc-\/atcmd.h}!atcmd\_tryInvokeAdv@{atcmd\_tryInvokeAdv}}
\index{atcmd\_tryInvokeAdv@{atcmd\_tryInvokeAdv}!ltemc-\/atcmd.h@{ltemc-\/atcmd.h}}
\doxysubsubsection{\texorpdfstring{atcmd\_tryInvokeAdv()}{atcmd\_tryInvokeAdv()}}
{\footnotesize\ttfamily bool atcmd\+\_\+try\+Invoke\+Adv (\begin{DoxyParamCaption}\item[{const char $\ast$}]{cmd\+Str,  }\item[{uint16\+\_\+t}]{timeout,  }\item[{uint16\+\_\+t($\ast$)(const char $\ast$response, char $\ast$$\ast$endptr)}]{task\+Complete\+Parser }\end{DoxyParamCaption})}



Invokes a B\+Gx AT command with application specified action values. 


\begin{DoxyParams}{Parameters}
{\em cmd\+Str} & \mbox{[}in\mbox{]} The command string to send to the B\+G96 module. \\
\hline
{\em timeout} & \mbox{[}in\mbox{]} Number of milliseconds the action can take. Use system default A\+C\+T\+I\+O\+N\+\_\+\+T\+I\+M\+E\+O\+U\+Tml or your value. \\
\hline
{\em task\+Complete\+Parser} & \mbox{[}in\mbox{]} Custom command response parser to signal result is complete. N\+U\+LL for std parser.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if action was invoked, false if not 
\end{DoxyReturn}
