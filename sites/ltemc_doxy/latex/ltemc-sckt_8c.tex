\hypertarget{ltemc-sckt_8c}{}\doxysection{C\+:/\+Users/\+Greg\+Terrell/\+Documents/\+Code\+Dev/\+Arduino/libraries/\+Loo\+UQ-\/\+LTEm\+C/src/ltemc-\/sckt.c File Reference}
\label{ltemc-sckt_8c}\index{C:/Users/GregTerrell/Documents/CodeDev/Arduino/libraries/LooUQ-\/LTEmC/src/ltemc-\/sckt.c@{C:/Users/GregTerrell/Documents/CodeDev/Arduino/libraries/LooUQ-\/LTEmC/src/ltemc-\/sckt.c}}


Public API providing socket streams (UDP/\+TCP/\+SSL/\+TLS) support.  


{\ttfamily \#include \char`\"{}ltemc-\/internal.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ltemc-\/sckt.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{ltemc-sckt_8c_a152fc5203b90b1cff03b7b78579b8f52}\label{ltemc-sckt_8c_a152fc5203b90b1cff03b7b78579b8f52}} 
\#define {\bfseries \+\_\+\+DEBUG}~0
\item 
\mbox{\Hypertarget{ltemc-sckt_8c_ab818574b6e7324559d0b09a6fc9ca1f2}\label{ltemc-sckt_8c_ab818574b6e7324559d0b09a6fc9ca1f2}} 
\#define {\bfseries PRINTF}(c\+\_\+,  f\+\_\+, ...)
\item 
\mbox{\Hypertarget{ltemc-sckt_8c_a2f0e3a84d1660f6424fdc69e2e1aea8d}\label{ltemc-sckt_8c_a2f0e3a84d1660f6424fdc69e2e1aea8d}} 
\#define {\bfseries SRCFILE}~\char`\"{}SKT\char`\"{}
\item 
\mbox{\Hypertarget{ltemc-sckt_8c_a74e75242132eaabbc1c512488a135926}\label{ltemc-sckt_8c_a74e75242132eaabbc1c512488a135926}} 
\#define {\bfseries MIN}(x,  y)~(((x) $<$ (y)) ? (x) \+: (y))
\item 
\mbox{\Hypertarget{ltemc-sckt_8c_aacc3ee1a7f283f8ef65cea31f4436a95}\label{ltemc-sckt_8c_aacc3ee1a7f283f8ef65cea31f4436a95}} 
\#define {\bfseries MAX}(x,  y)~(((x) $<$ (y)) ? (y) \+: (x))
\item 
\mbox{\Hypertarget{ltemc-sckt_8c_ae61569bd6377f220e1914ff0e7b2692a}\label{ltemc-sckt_8c_ae61569bd6377f220e1914ff0e7b2692a}} 
\#define {\bfseries DETECT\+\_\+\+STALL}(tick,  threshold)~if (p\+Millis() -\/ tick $>$ threshold) return result\+Code\+\_\+\+\_\+timeout
\item 
\mbox{\Hypertarget{ltemc-sckt_8c_a81ee6cc7481040ca347e572d4ba0d6fa}\label{ltemc-sckt_8c_a81ee6cc7481040ca347e572d4ba0d6fa}} 
\#define {\bfseries ASSERT\+\_\+\+NOTSTALLED}(tick,  threshold)~ASSERT(p\+Millis() -\/ tick $>$ threshold)
\item 
\mbox{\Hypertarget{ltemc-sckt_8c_afca4d2b18bd3de9c56fe1a50d7e0ba18}\label{ltemc-sckt_8c_afca4d2b18bd3de9c56fe1a50d7e0ba18}} 
\#define {\bfseries SCKT\+\_\+\+URC\+\_\+\+HEADERSZ}~30
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{ltemc-sckt_8c_a3cad88bb34aceb492e3eee495c5e1d06}{sckt\+\_\+init\+Control}} (\mbox{\hyperlink{ltemc-sckt_8h_ac7190408332db4886968d20a407c30f7}{sckt\+Ctrl\+\_\+t}} $\ast$sckt\+Ctrl, \mbox{\hyperlink{ltemc-types_8h_a8f196c92332451166a912a2d0220d8c9}{data\+Cntxt\+\_\+t}} data\+Cntxt, \mbox{\hyperlink{ltemc-types_8h_a7a6e369673a63d301becf28b22bdbec7}{stream\+Type\+\_\+t}} protocol, \mbox{\hyperlink{ltemc-sckt_8h_a279f95a02b0ec0771b9561a761acfd86}{sckt\+App\+Recv\+\_\+func}} recv\+Callback)
\begin{DoxyCompactList}\small\item\em Create a socket data control(TCP/\+UDP/\+SSL). \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-sckt_8c_a978f6fe8be035e3da224672c4ffb0512}{sckt\+\_\+set\+Connection}} (\mbox{\hyperlink{ltemc-sckt_8h_ac7190408332db4886968d20a407c30f7}{sckt\+Ctrl\+\_\+t}} $\ast$sckt\+Ctrl, uint8\+\_\+t pdp\+Cntxt, const char $\ast$host\+Url, uint16\+\_\+t host\+Port, uint16\+\_\+t lcl\+Port)
\begin{DoxyCompactList}\small\item\em Set connection parameters for a socket connection (TCP/\+UDP) \end{DoxyCompactList}\item 
result\+Code\+\_\+t \mbox{\hyperlink{ltemc-sckt_8c_a33c4cd2fc787822152689ec023e9e629}{sckt\+\_\+open}} (\mbox{\hyperlink{ltemc-sckt_8h_ac7190408332db4886968d20a407c30f7}{sckt\+Ctrl\+\_\+t}} $\ast$sckt\+Ctrl, bool clean\+Session)
\begin{DoxyCompactList}\small\item\em Open a data connection (socket) to d data to an established endpoint via protocol used to open socket (TCP/\+UDP/\+TCP INCOMING). \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-sckt_8c_a655595f0eaf4c982760af83e215d1e6b}{sckt\+\_\+close}} (\mbox{\hyperlink{ltemc-sckt_8h_ac7190408332db4886968d20a407c30f7}{sckt\+Ctrl\+\_\+t}} $\ast$sckt\+Ctrl)
\begin{DoxyCompactList}\small\item\em Close an established (open) connection socket. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-sckt_8c_a9936f1046c83209cf495e7fdbc2ac7a9}{SCKT\+\_\+close\+Cntxt}} (uint8\+\_\+t cntxt\+Nm)
\begin{DoxyCompactList}\small\item\em Close an established (open) connection socket by context number. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{ltemc-sckt_8c_a7094cfa29eae6fd7652726e3b12eeec7}{sckt\+\_\+flush}} (\mbox{\hyperlink{ltemc-sckt_8h_ac7190408332db4886968d20a407c30f7}{sckt\+Ctrl\+\_\+t}} $\ast$sckt\+Ctrl)
\begin{DoxyCompactList}\small\item\em Reset open socket connection. This function drains the connection\textquotesingle{}s data pipeline. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{ltemc-sckt_8c_a6138e5322f98a5e204a75137c971f9e6}{sckt\+\_\+get\+State}} (\mbox{\hyperlink{ltemc-sckt_8h_ac7190408332db4886968d20a407c30f7}{sckt\+Ctrl\+\_\+t}} $\ast$sckt\+Ctrl)
\begin{DoxyCompactList}\small\item\em Retrieve the state of a socket connection. \end{DoxyCompactList}\item 
result\+Code\+\_\+t \mbox{\hyperlink{ltemc-sckt_8c_a9cdb1f0ba73e0a4b5bbb62b631432f4e}{sckt\+\_\+send}} (\mbox{\hyperlink{ltemc-sckt_8h_ac7190408332db4886968d20a407c30f7}{sckt\+Ctrl\+\_\+t}} $\ast$sckt\+Ctrl, const char $\ast$data, uint16\+\_\+t data\+Sz)
\begin{DoxyCompactList}\small\item\em Send data to an established endpoint via protocol used to open socket (TCP/\+UDP/\+TCP INCOMING). \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{ltemc-sckt_8c_aa520cbfde107f228ddd40be60d2b6905}\label{ltemc-sckt_8c_aa520cbfde107f228ddd40be60d2b6905}} 
\mbox{\hyperlink{ltemc-internal_8h_a5f38bbe75173238b7cfd922a17c69b27}{ltem\+Device\+\_\+t}} {\bfseries g\+\_\+lq\+LTEM}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Public API providing socket streams (UDP/\+TCP/\+SSL/\+TLS) support. 

\DoxyHorRuler{0}


\begin{DoxyAuthor}{Author}
Greg Terrell, Loo\+UQ Incorporated
\end{DoxyAuthor}
{\bfseries{Loo\+UQ Incorporated}}~\newline
\href{mailto:answers@loouq.com}{\texttt{ answers@loouq.\+com}}~\newline
807 Airport Access Road, Suite 201, Traverse City, MI 49686 USA~\newline
~\newline
Copyright (c) 2020-\/2023 Loo\+UQ Incorporated.~\newline
This project is released under the GPL-\/3.\+0 License.

\DoxyHorRuler{0}
 \begin{DoxyVerb}This project is released under the GPL-3.0 License.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.
\end{DoxyVerb}
 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{ltemc-sckt_8c_a655595f0eaf4c982760af83e215d1e6b}\label{ltemc-sckt_8c_a655595f0eaf4c982760af83e215d1e6b}} 
\index{ltemc-\/sckt.c@{ltemc-\/sckt.c}!sckt\_close@{sckt\_close}}
\index{sckt\_close@{sckt\_close}!ltemc-\/sckt.c@{ltemc-\/sckt.c}}
\doxysubsubsection{\texorpdfstring{sckt\_close()}{sckt\_close()}}
{\footnotesize\ttfamily void sckt\+\_\+close (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-sckt_8h_ac7190408332db4886968d20a407c30f7}{sckt\+Ctrl\+\_\+t}} $\ast$}]{sckt\+Ctrl }\end{DoxyParamCaption})}



Close an established (open) connection socket. 


\begin{DoxyParams}{Parameters}
{\em sckt\+Ctrl} & \mbox{[}in\mbox{]} -\/ Pointer to socket control struct governing the sending socket\textquotesingle{}s operation \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc-sckt_8c_a9936f1046c83209cf495e7fdbc2ac7a9}\label{ltemc-sckt_8c_a9936f1046c83209cf495e7fdbc2ac7a9}} 
\index{ltemc-\/sckt.c@{ltemc-\/sckt.c}!SCKT\_closeCntxt@{SCKT\_closeCntxt}}
\index{SCKT\_closeCntxt@{SCKT\_closeCntxt}!ltemc-\/sckt.c@{ltemc-\/sckt.c}}
\doxysubsubsection{\texorpdfstring{SCKT\_closeCntxt()}{SCKT\_closeCntxt()}}
{\footnotesize\ttfamily void SCKT\+\_\+close\+Cntxt (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{cntxt\+Nm }\end{DoxyParamCaption})}



Close an established (open) connection socket by context number. 

This is provided for LTEm use in the case of a connection close/loss. \mbox{\Hypertarget{ltemc-sckt_8c_a7094cfa29eae6fd7652726e3b12eeec7}\label{ltemc-sckt_8c_a7094cfa29eae6fd7652726e3b12eeec7}} 
\index{ltemc-\/sckt.c@{ltemc-\/sckt.c}!sckt\_flush@{sckt\_flush}}
\index{sckt\_flush@{sckt\_flush}!ltemc-\/sckt.c@{ltemc-\/sckt.c}}
\doxysubsubsection{\texorpdfstring{sckt\_flush()}{sckt\_flush()}}
{\footnotesize\ttfamily bool sckt\+\_\+flush (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-sckt_8h_ac7190408332db4886968d20a407c30f7}{sckt\+Ctrl\+\_\+t}} $\ast$}]{sckt\+Ctrl }\end{DoxyParamCaption})}



Reset open socket connection. This function drains the connection\textquotesingle{}s data pipeline. 

NOT IMPLEMENTED \mbox{\Hypertarget{ltemc-sckt_8c_a6138e5322f98a5e204a75137c971f9e6}\label{ltemc-sckt_8c_a6138e5322f98a5e204a75137c971f9e6}} 
\index{ltemc-\/sckt.c@{ltemc-\/sckt.c}!sckt\_getState@{sckt\_getState}}
\index{sckt\_getState@{sckt\_getState}!ltemc-\/sckt.c@{ltemc-\/sckt.c}}
\doxysubsubsection{\texorpdfstring{sckt\_getState()}{sckt\_getState()}}
{\footnotesize\ttfamily bool sckt\+\_\+get\+State (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-sckt_8h_ac7190408332db4886968d20a407c30f7}{sckt\+Ctrl\+\_\+t}} $\ast$}]{sckt\+Ctrl }\end{DoxyParamCaption})}



Retrieve the state of a socket connection. 


\begin{DoxyParams}{Parameters}
{\em sckt\+Ctrl} & \mbox{[}in\mbox{]} -\/ Pointer to socket control struct governing the sending socket\textquotesingle{}s operation \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if socket is open 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-sckt_8c_a3cad88bb34aceb492e3eee495c5e1d06}\label{ltemc-sckt_8c_a3cad88bb34aceb492e3eee495c5e1d06}} 
\index{ltemc-\/sckt.c@{ltemc-\/sckt.c}!sckt\_initControl@{sckt\_initControl}}
\index{sckt\_initControl@{sckt\_initControl}!ltemc-\/sckt.c@{ltemc-\/sckt.c}}
\doxysubsubsection{\texorpdfstring{sckt\_initControl()}{sckt\_initControl()}}
{\footnotesize\ttfamily void sckt\+\_\+init\+Control (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-sckt_8h_ac7190408332db4886968d20a407c30f7}{sckt\+Ctrl\+\_\+t}} $\ast$}]{sckt\+Ctrl,  }\item[{\mbox{\hyperlink{ltemc-types_8h_a8f196c92332451166a912a2d0220d8c9}{data\+Cntxt\+\_\+t}}}]{data\+Cntxt,  }\item[{\mbox{\hyperlink{ltemc-types_8h_a7a6e369673a63d301becf28b22bdbec7}{stream\+Type\+\_\+t}}}]{protocol,  }\item[{\mbox{\hyperlink{ltemc-sckt_8h_a279f95a02b0ec0771b9561a761acfd86}{sckt\+App\+Recv\+\_\+func}}}]{recv\+Callback }\end{DoxyParamCaption})}



Create a socket data control(TCP/\+UDP/\+SSL). 


\begin{DoxyParams}{Parameters}
{\em sckt\+Ctrl} & \mbox{[}in/out\mbox{]} Pointer to socket control structure \\
\hline
{\em pdp\+Context\+Id} & \mbox{[}in\mbox{]} -\/ The PDP context supporting this data connection TCP/\+UDP can run over non-\/default PDP contexts \\
\hline
{\em socket\+Id} & \mbox{[}in\mbox{]} -\/ Data context (0-\/5) to host socket \\
\hline
{\em protocol} & \mbox{[}in\mbox{]} -\/ The IP protocol to use for the connection (TCP/\+UDP/\+SSL clients) \\
\hline
{\em recv\+Buf} & \mbox{[}in\mbox{]} -\/ Pointer to application created receive buffer \\
\hline
{\em recv\+Buf\+Sz} & \mbox{[}in\mbox{]} -\/ Size of allocated receive buffer \\
\hline
{\em recv\+Callback} & \mbox{[}in\mbox{]} -\/ The callback function in your application to be notified of received data ready \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
socket result code similar to http status code, OK = 200 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-sckt_8c_a33c4cd2fc787822152689ec023e9e629}\label{ltemc-sckt_8c_a33c4cd2fc787822152689ec023e9e629}} 
\index{ltemc-\/sckt.c@{ltemc-\/sckt.c}!sckt\_open@{sckt\_open}}
\index{sckt\_open@{sckt\_open}!ltemc-\/sckt.c@{ltemc-\/sckt.c}}
\doxysubsubsection{\texorpdfstring{sckt\_open()}{sckt\_open()}}
{\footnotesize\ttfamily result\+Code\+\_\+t sckt\+\_\+open (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-sckt_8h_ac7190408332db4886968d20a407c30f7}{sckt\+Ctrl\+\_\+t}} $\ast$}]{sckt\+Ctrl,  }\item[{bool}]{clean\+Session }\end{DoxyParamCaption})}



Open a data connection (socket) to d data to an established endpoint via protocol used to open socket (TCP/\+UDP/\+TCP INCOMING). 

Open a data connection (socket) to d data to an established endpoint via protocol used to open socket (TCP/\+UDP/\+TCP INCOMING) \mbox{\Hypertarget{ltemc-sckt_8c_a9cdb1f0ba73e0a4b5bbb62b631432f4e}\label{ltemc-sckt_8c_a9cdb1f0ba73e0a4b5bbb62b631432f4e}} 
\index{ltemc-\/sckt.c@{ltemc-\/sckt.c}!sckt\_send@{sckt\_send}}
\index{sckt\_send@{sckt\_send}!ltemc-\/sckt.c@{ltemc-\/sckt.c}}
\doxysubsubsection{\texorpdfstring{sckt\_send()}{sckt\_send()}}
{\footnotesize\ttfamily result\+Code\+\_\+t sckt\+\_\+send (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-sckt_8h_ac7190408332db4886968d20a407c30f7}{sckt\+Ctrl\+\_\+t}} $\ast$}]{sckt\+Ctrl,  }\item[{const char $\ast$}]{data,  }\item[{uint16\+\_\+t}]{data\+Sz }\end{DoxyParamCaption})}



Send data to an established endpoint via protocol used to open socket (TCP/\+UDP/\+TCP INCOMING). 

Send data to an established endpoint via protocol used to open socket (TCP/\+UDP/\+TCP INCOMING) \mbox{\Hypertarget{ltemc-sckt_8c_a978f6fe8be035e3da224672c4ffb0512}\label{ltemc-sckt_8c_a978f6fe8be035e3da224672c4ffb0512}} 
\index{ltemc-\/sckt.c@{ltemc-\/sckt.c}!sckt\_setConnection@{sckt\_setConnection}}
\index{sckt\_setConnection@{sckt\_setConnection}!ltemc-\/sckt.c@{ltemc-\/sckt.c}}
\doxysubsubsection{\texorpdfstring{sckt\_setConnection()}{sckt\_setConnection()}}
{\footnotesize\ttfamily void sckt\+\_\+set\+Connection (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-sckt_8h_ac7190408332db4886968d20a407c30f7}{sckt\+Ctrl\+\_\+t}} $\ast$}]{sckt\+Ctrl,  }\item[{uint8\+\_\+t}]{pdp\+Cntxt,  }\item[{const char $\ast$}]{host\+Url,  }\item[{const uint16\+\_\+t}]{host\+Port,  }\item[{uint16\+\_\+t}]{lcl\+Port }\end{DoxyParamCaption})}



Set connection parameters for a socket connection (TCP/\+UDP) 


\begin{DoxyParams}{Parameters}
{\em sckt\+Ctrl} & \mbox{[}in/out\mbox{]} Pointer to socket control structure \\
\hline
{\em host\+Url} & \mbox{[}in\mbox{]} -\/ The IP address (string) or domain name of the remote host to communicate with \\
\hline
{\em host\+Port} & \mbox{[}in\mbox{]} -\/ The port number at the remote host \\
\hline
{\em lcl\+Port} & \mbox{[}in\mbox{]} -\/ The port number on this side of the conversation, set to 0 to auto-\/assign \\
\hline
\end{DoxyParams}
