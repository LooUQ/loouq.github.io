\hypertarget{ltemc-http_8c}{}\doxysection{C\+:/\+Users/\+Greg\+Terrell/\+Documents/\+Code\+Dev/\+Arduino/libraries/\+Loo\+UQ-\/\+LTEm\+C/src/ltemc-\/http.c File Reference}
\label{ltemc-http_8c}\index{C:/Users/GregTerrell/Documents/CodeDev/Arduino/libraries/LooUQ-\/LTEmC/src/ltemc-\/http.c@{C:/Users/GregTerrell/Documents/CodeDev/Arduino/libraries/LooUQ-\/LTEmC/src/ltemc-\/http.c}}


Public API providing HTTP/\+HTTPS support.  


{\ttfamily \#include \char`\"{}ltemc-\/internal.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ltemc-\/http.\+h\char`\"{}}\newline
{\ttfamily \#include $<$jlink\+Rtt.\+h$>$}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{ltemc-http_8c_a2f0e3a84d1660f6424fdc69e2e1aea8d}\label{ltemc-http_8c_a2f0e3a84d1660f6424fdc69e2e1aea8d}} 
\#define {\bfseries SRCFILE}~\char`\"{}HTT\char`\"{}
\item 
\mbox{\Hypertarget{ltemc-http_8c_a152fc5203b90b1cff03b7b78579b8f52}\label{ltemc-http_8c_a152fc5203b90b1cff03b7b78579b8f52}} 
\#define {\bfseries \+\_\+\+DEBUG}~2
\item 
\mbox{\Hypertarget{ltemc-http_8c_a7acb4d06a9fd952f51471791f06d60a8}\label{ltemc-http_8c_a7acb4d06a9fd952f51471791f06d60a8}} 
\#define {\bfseries PRINTF}(c\+\_\+,  f\+\_\+,  \+\_\+\+\_\+\+VA\+\_\+\+ARGS\+\_\+\+\_\+...)~do \{ rtt\+\_\+printf(c\+\_\+, (f\+\_\+), \#\# \+\_\+\+\_\+\+VA\+\_\+\+ARGS\+\_\+\+\_\+); \} while(0)
\item 
\mbox{\Hypertarget{ltemc-http_8c_a74e75242132eaabbc1c512488a135926}\label{ltemc-http_8c_a74e75242132eaabbc1c512488a135926}} 
\#define {\bfseries MIN}(x,  y)~(((x) $<$ (y)) ? (x) \+: (y))
\item 
\mbox{\Hypertarget{ltemc-http_8c_aff9931d7524c88e07743af6535b20761}\label{ltemc-http_8c_aff9931d7524c88e07743af6535b20761}} 
\#define {\bfseries MAX}(X,  Y)~(((X) $>$ (Y)) ? (X) \+: (Y))
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{ltemc-http_8c_abf9daa62d261abcac1e4cb27c9e72adf}\label{ltemc-http_8c_abf9daa62d261abcac1e4cb27c9e72adf}} 
{\bfseries asm} (\char`\"{}.global \+\_\+printf\+\_\+float\char`\"{})
\item 
void \mbox{\hyperlink{ltemc-http_8c_afba2c9cfce031883d09e0f898f7cc772}{http\+\_\+init\+Control}} (\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$http\+Ctrl, \mbox{\hyperlink{ltemc-types_8h_a8f196c92332451166a912a2d0220d8c9}{data\+Cntxt\+\_\+t}} data\+Cntxt, \mbox{\hyperlink{ltemc-http_8h_a454e86436bca928757a847fb1afae460}{http\+Recv\+\_\+func}} recv\+Callback)
\begin{DoxyCompactList}\small\item\em Create a HTTP(s) control structure to manage web communications. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-http_8c_abcf94eb114c546ff64a9d8cd4f1056ee}{http\+\_\+set\+Connection}} (\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$http\+Ctrl, const char $\ast$host\+Url, uint16\+\_\+t host\+Port)
\begin{DoxyCompactList}\small\item\em Set host connection characteristics. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-http_8c_a1b52256d58e1cda2059bec8ad897a8ff}{http\+\_\+enable\+Custom\+Hdrs}} (\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$http\+Ctrl, char $\ast$header\+Buf, uint16\+\_\+t header\+Buf\+Sz)
\begin{DoxyCompactList}\small\item\em Registers custom headers (char) buffer with HTTP control. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-http_8c_adecbc0670a410f97952a20fe23cfd7d9}{http\+\_\+add\+Common\+Hdrs}} (\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$http\+Ctrl, \mbox{\hyperlink{ltemc-http_8h_a8a857a48248e4895b0d7315937d53693}{http\+Header\+Map\+\_\+t}} header\+Map)
\begin{DoxyCompactList}\small\item\em Adds common http headers to the custom headers buffer. REQUIRES previous enable of custom headers and buffer registration. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{ltemc-http_8c_a518267f87ab00e90f7005009dfd8485b}\label{ltemc-http_8c_a518267f87ab00e90f7005009dfd8485b}} 
void {\bfseries http\+\_\+add\+Custom\+Hdr} (\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$http\+Ctrl, const char $\ast$hdr\+Text)
\item 
void \mbox{\hyperlink{ltemc-http_8c_acbc88b6c789280f7df70c2995d524030}{http\+\_\+add\+Basic\+Auth\+Hdr}} (\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$http, const char $\ast$user, const char $\ast$pw)
\begin{DoxyCompactList}\small\item\em Adds a basic authorization header to the custom headers buffer, requires previous custom headers buffer registration. \end{DoxyCompactList}\item 
result\+Code\+\_\+t \mbox{\hyperlink{ltemc-http_8c_a31c2de61359b0c044d552dee71e7d674}{http\+\_\+get}} (\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$http\+Ctrl, const char $\ast$relative\+Url, bool return\+Response\+Hdrs)
\begin{DoxyCompactList}\small\item\em Perform HTTP GET operation. Results are internally buffered on the LTEm, see http\+\_\+read(). \end{DoxyCompactList}\item 
result\+Code\+\_\+t \mbox{\hyperlink{ltemc-http_8c_abc6d5690dadd6543bde6273a664d9ea5}{http\+\_\+post}} (\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$http\+Ctrl, const char $\ast$relative\+Url, bool return\+Response\+Hdrs, const char $\ast$post\+Data, uint16\+\_\+t post\+Data\+Sz)
\begin{DoxyCompactList}\small\item\em Performs a HTTP POST page web request. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{ltemc-http_8c_abbbfd4c8512cd8b279e6726d4f8231a3}{http\+\_\+read\+Page}} (\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$http\+Ctrl)
\begin{DoxyCompactList}\small\item\em Retrieves page results from a previous GET or POST. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-http_8c_adc3e553b77a6341664862d7b8a9c0060}{http\+\_\+cancel\+Page}} (\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$http\+Ctrl)
\begin{DoxyCompactList}\small\item\em Not currently implemented. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{ltemc-http_8c_aa520cbfde107f228ddd40be60d2b6905}\label{ltemc-http_8c_aa520cbfde107f228ddd40be60d2b6905}} 
\mbox{\hyperlink{ltemc-internal_8h_a5f38bbe75173238b7cfd922a17c69b27}{ltem\+Device\+\_\+t}} {\bfseries g\+\_\+lq\+LTEM}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Public API providing HTTP/\+HTTPS support. 

\DoxyHorRuler{0}


\begin{DoxyAuthor}{Author}
Greg Terrell, Loo\+UQ Incorporated
\end{DoxyAuthor}
{\bfseries{Loo\+UQ Incorporated}}~\newline
\href{mailto:answers@loouq.com}{\texttt{ answers@loouq.\+com}}~\newline
807 Airport Access Road, Suite 201, Traverse City, MI 49686 USA~\newline
~\newline
Copyright (c) 2020-\/2023 Loo\+UQ Incorporated.~\newline
This project is released under the GPL-\/3.\+0 License.

\DoxyHorRuler{0}
 \begin{DoxyVerb}This project is released under the GPL-3.0 License.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.
\end{DoxyVerb}
 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{ltemc-http_8c_acbc88b6c789280f7df70c2995d524030}\label{ltemc-http_8c_acbc88b6c789280f7df70c2995d524030}} 
\index{ltemc-\/http.c@{ltemc-\/http.c}!http\_addBasicAuthHdr@{http\_addBasicAuthHdr}}
\index{http\_addBasicAuthHdr@{http\_addBasicAuthHdr}!ltemc-\/http.c@{ltemc-\/http.c}}
\doxysubsubsection{\texorpdfstring{http\_addBasicAuthHdr()}{http\_addBasicAuthHdr()}}
{\footnotesize\ttfamily void http\+\_\+add\+Basic\+Auth\+Hdr (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$}]{http\+Ctrl,  }\item[{const char $\ast$}]{user,  }\item[{const char $\ast$}]{pw }\end{DoxyParamCaption})}



Adds a basic authorization header to the custom headers buffer, requires previous custom headers buffer registration. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em http} & Pointer to the control block for HTTP communications. \\
\hline
\mbox{\texttt{ in}}  & {\em user} & User name. \\
\hline
\mbox{\texttt{ in}}  & {\em pw} & Password/secret for header. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc-http_8c_adecbc0670a410f97952a20fe23cfd7d9}\label{ltemc-http_8c_adecbc0670a410f97952a20fe23cfd7d9}} 
\index{ltemc-\/http.c@{ltemc-\/http.c}!http\_addCommonHdrs@{http\_addCommonHdrs}}
\index{http\_addCommonHdrs@{http\_addCommonHdrs}!ltemc-\/http.c@{ltemc-\/http.c}}
\doxysubsubsection{\texorpdfstring{http\_addCommonHdrs()}{http\_addCommonHdrs()}}
{\footnotesize\ttfamily void http\+\_\+add\+Common\+Hdrs (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$}]{http\+Ctrl,  }\item[{\mbox{\hyperlink{ltemc-http_8h_a8a857a48248e4895b0d7315937d53693}{http\+Header\+Map\+\_\+t}}}]{header\+Map }\end{DoxyParamCaption})}



Adds common http headers to the custom headers buffer. REQUIRES previous enable of custom headers and buffer registration. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em http\+Ctrl} & Pointer to the control block for HTTP communications. \\
\hline
\mbox{\texttt{ in}}  & {\em header\+Map} & Bitmap for which standard headers to use. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc-http_8c_adc3e553b77a6341664862d7b8a9c0060}\label{ltemc-http_8c_adc3e553b77a6341664862d7b8a9c0060}} 
\index{ltemc-\/http.c@{ltemc-\/http.c}!http\_cancelPage@{http\_cancelPage}}
\index{http\_cancelPage@{http\_cancelPage}!ltemc-\/http.c@{ltemc-\/http.c}}
\doxysubsubsection{\texorpdfstring{http\_cancelPage()}{http\_cancelPage()}}
{\footnotesize\ttfamily void http\+\_\+cancel\+Page (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$}]{http\+Ctrl }\end{DoxyParamCaption})}



Not currently implemented. 

Cancels a http\+\_\+read\+Page flow if the remaining contents are not needed. \mbox{\Hypertarget{ltemc-http_8c_a1b52256d58e1cda2059bec8ad897a8ff}\label{ltemc-http_8c_a1b52256d58e1cda2059bec8ad897a8ff}} 
\index{ltemc-\/http.c@{ltemc-\/http.c}!http\_enableCustomHdrs@{http\_enableCustomHdrs}}
\index{http\_enableCustomHdrs@{http\_enableCustomHdrs}!ltemc-\/http.c@{ltemc-\/http.c}}
\doxysubsubsection{\texorpdfstring{http\_enableCustomHdrs()}{http\_enableCustomHdrs()}}
{\footnotesize\ttfamily void http\+\_\+enable\+Custom\+Hdrs (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$}]{http\+Ctrl,  }\item[{char $\ast$}]{hdr\+Buffer,  }\item[{uint16\+\_\+t}]{hdr\+Buffer\+Sz }\end{DoxyParamCaption})}



Registers custom headers (char) buffer with HTTP control. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em http\+Ctrl} & Pointer to the control block for HTTP communications. \\
\hline
\mbox{\texttt{ in}}  & {\em header\+Buf} & pointer to header buffer created by application \\
\hline
\mbox{\texttt{ in}}  & {\em header\+Buf\+Sz} & size of the header buffer \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc-http_8c_a31c2de61359b0c044d552dee71e7d674}\label{ltemc-http_8c_a31c2de61359b0c044d552dee71e7d674}} 
\index{ltemc-\/http.c@{ltemc-\/http.c}!http\_get@{http\_get}}
\index{http\_get@{http\_get}!ltemc-\/http.c@{ltemc-\/http.c}}
\doxysubsubsection{\texorpdfstring{http\_get()}{http\_get()}}
{\footnotesize\ttfamily result\+Code\+\_\+t http\+\_\+get (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$}]{http\+Ctrl,  }\item[{const char $\ast$}]{relative\+Url,  }\item[{bool}]{return\+Response\+Hdrs }\end{DoxyParamCaption})}



Perform HTTP GET operation. Results are internally buffered on the LTEm, see http\+\_\+read(). 

\hypertarget{ltemc-http_8h_autotoc_md11}{}\doxysubsubsection{@brief Perform HTTP GET operation. Results are internally buffered on the LTEm, see http\+\_\+read().}\label{ltemc-http_8h_autotoc_md11}
\mbox{\Hypertarget{ltemc-http_8c_afba2c9cfce031883d09e0f898f7cc772}\label{ltemc-http_8c_afba2c9cfce031883d09e0f898f7cc772}} 
\index{ltemc-\/http.c@{ltemc-\/http.c}!http\_initControl@{http\_initControl}}
\index{http\_initControl@{http\_initControl}!ltemc-\/http.c@{ltemc-\/http.c}}
\doxysubsubsection{\texorpdfstring{http\_initControl()}{http\_initControl()}}
{\footnotesize\ttfamily void http\+\_\+init\+Control (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$}]{http\+Ctrl,  }\item[{\mbox{\hyperlink{ltemc-types_8h_a8f196c92332451166a912a2d0220d8c9}{data\+Cntxt\+\_\+t}}}]{data\+Cntxt,  }\item[{\mbox{\hyperlink{ltemc-http_8h_a454e86436bca928757a847fb1afae460}{http\+Recv\+\_\+func}}}]{recv\+Callback }\end{DoxyParamCaption})}



Create a HTTP(s) control structure to manage web communications. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em http\+Ctrl} & HTTP control structure pointer, struct defines parameters of communications with web server. \\
\hline
\mbox{\texttt{ in}}  & {\em data\+Cntxt} & \mbox{[}in\mbox{]} The data context (0-\/5) to use for this communications. \\
\hline
\mbox{\texttt{ in}}  & {\em recv\+Callback} & \mbox{[}in\mbox{]} Callback function to receive incoming page data. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc-http_8c_abc6d5690dadd6543bde6273a664d9ea5}\label{ltemc-http_8c_abc6d5690dadd6543bde6273a664d9ea5}} 
\index{ltemc-\/http.c@{ltemc-\/http.c}!http\_post@{http\_post}}
\index{http\_post@{http\_post}!ltemc-\/http.c@{ltemc-\/http.c}}
\doxysubsubsection{\texorpdfstring{http\_post()}{http\_post()}}
{\footnotesize\ttfamily result\+Code\+\_\+t http\+\_\+post (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$}]{http\+Ctrl,  }\item[{const char $\ast$}]{relative\+Url,  }\item[{bool}]{return\+Response\+Hdrs,  }\item[{const char $\ast$}]{post\+Data,  }\item[{uint16\+\_\+t}]{post\+Data\+Sz }\end{DoxyParamCaption})}



Performs a HTTP POST page web request. 

\hypertarget{ltemc-http_8h_autotoc_md12}{}\doxysubsubsection{@brief Performs a HTTP POST page web request.}\label{ltemc-http_8h_autotoc_md12}
\mbox{\Hypertarget{ltemc-http_8c_abbbfd4c8512cd8b279e6726d4f8231a3}\label{ltemc-http_8c_abbbfd4c8512cd8b279e6726d4f8231a3}} 
\index{ltemc-\/http.c@{ltemc-\/http.c}!http\_readPage@{http\_readPage}}
\index{http\_readPage@{http\_readPage}!ltemc-\/http.c@{ltemc-\/http.c}}
\doxysubsubsection{\texorpdfstring{http\_readPage()}{http\_readPage()}}
{\footnotesize\ttfamily uint16\+\_\+t http\+\_\+read\+Page (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$}]{http\+Ctrl }\end{DoxyParamCaption})}



Retrieves page results from a previous GET or POST. 

\hypertarget{ltemc-http_8h_autotoc_md13}{}\doxysubsubsection{@brief Retrieves page results from a previous GET or POST.}\label{ltemc-http_8h_autotoc_md13}
\mbox{\Hypertarget{ltemc-http_8c_abcf94eb114c546ff64a9d8cd4f1056ee}\label{ltemc-http_8c_abcf94eb114c546ff64a9d8cd4f1056ee}} 
\index{ltemc-\/http.c@{ltemc-\/http.c}!http\_setConnection@{http\_setConnection}}
\index{http\_setConnection@{http\_setConnection}!ltemc-\/http.c@{ltemc-\/http.c}}
\doxysubsubsection{\texorpdfstring{http\_setConnection()}{http\_setConnection()}}
{\footnotesize\ttfamily void http\+\_\+set\+Connection (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-http_8h_a248527fb20f1c2f77c80603a6b295733}{http\+Ctrl\+\_\+t}} $\ast$}]{http\+Ctrl,  }\item[{const char $\ast$}]{host\+Url,  }\item[{uint16\+\_\+t}]{host\+Port }\end{DoxyParamCaption})}



Set host connection characteristics. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em http\+Ctrl} & \mbox{[}in\mbox{]} HTTP control structure pointer, struct defines parameters of communications with web server. \\
\hline
\mbox{\texttt{ in}}  & {\em host\+URL} & \mbox{[}in\mbox{]} The HOST address of the web server URL. \\
\hline
\mbox{\texttt{ in}}  & {\em host\+Port} & \mbox{[}in\mbox{]} The port number for the host web server. 0 \texorpdfstring{$>$}{>}\texorpdfstring{$>$}{>} auto-\/select HTTP(80), HTTPS(443) \\
\hline
\end{DoxyParams}
