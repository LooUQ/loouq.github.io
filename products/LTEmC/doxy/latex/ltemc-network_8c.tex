\hypertarget{ltemc-network_8c}{}\doxysection{C\+:/\+Users/\+Greg\+Terrell/\+Documents/\+Code\+Dev/\+Arduino/libraries/\+Loo\+UQ-\/\+LTEm\+C/src/ltemc-\/network.c File Reference}
\label{ltemc-network_8c}\index{C:/Users/GregTerrell/Documents/CodeDev/Arduino/libraries/LooUQ-\/LTEmC/src/ltemc-\/network.c@{C:/Users/GregTerrell/Documents/CodeDev/Arduino/libraries/LooUQ-\/LTEmC/src/ltemc-\/network.c}}


Public API controlling modem interface with the cellular network.  


{\ttfamily \#include $<$jlink\+Rtt.\+h$>$}\newline
{\ttfamily \#include \char`\"{}ltemc-\/internal.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ltemc-\/network.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{ltemc-network_8c_a152fc5203b90b1cff03b7b78579b8f52}\label{ltemc-network_8c_a152fc5203b90b1cff03b7b78579b8f52}} 
\#define {\bfseries \+\_\+\+DEBUG}~2
\item 
\mbox{\Hypertarget{ltemc-network_8c_a7acb4d06a9fd952f51471791f06d60a8}\label{ltemc-network_8c_a7acb4d06a9fd952f51471791f06d60a8}} 
\#define {\bfseries PRINTF}(c\+\_\+,  f\+\_\+,  \+\_\+\+\_\+\+VA\+\_\+\+ARGS\+\_\+\+\_\+...)~do \{ rtt\+\_\+printf(c\+\_\+, (f\+\_\+), \#\# \+\_\+\+\_\+\+VA\+\_\+\+ARGS\+\_\+\+\_\+); \} while(0)
\item 
\mbox{\Hypertarget{ltemc-network_8c_a2f0e3a84d1660f6424fdc69e2e1aea8d}\label{ltemc-network_8c_a2f0e3a84d1660f6424fdc69e2e1aea8d}} 
\#define {\bfseries SRCFILE}~\char`\"{}NWK\char`\"{}
\item 
\mbox{\Hypertarget{ltemc-network_8c_acded44a40a84c6e4ecf02b6da518ce4e}\label{ltemc-network_8c_acded44a40a84c6e4ecf02b6da518ce4e}} 
\#define {\bfseries PROTOCOLS\+\_\+\+CMD\+\_\+\+BUFFER\+\_\+\+SZ}~80
\item 
\mbox{\Hypertarget{ltemc-network_8c_a74e75242132eaabbc1c512488a135926}\label{ltemc-network_8c_a74e75242132eaabbc1c512488a135926}} 
\#define {\bfseries MIN}(x,  y)~(((x)$<$(y)) ? (x)\+:(y))
\item 
\mbox{\Hypertarget{ltemc-network_8c_aef7a23081166f653810112178b3ce38b}\label{ltemc-network_8c_aef7a23081166f653810112178b3ce38b}} 
\#define {\bfseries STREMPTY}(charvar)~(charvar == NULL $\vert$$\vert$ charvar\mbox{[}0\mbox{]} == 0 )
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{ltemc-network_8c_abf9daa62d261abcac1e4cb27c9e72adf}\label{ltemc-network_8c_abf9daa62d261abcac1e4cb27c9e72adf}} 
{\bfseries asm} (\char`\"{}.global \+\_\+printf\+\_\+float\char`\"{})
\item 
\mbox{\Hypertarget{ltemc-network_8c_a59f08d7a2cf3e7d6685e377aff6bc57d}\label{ltemc-network_8c_a59f08d7a2cf3e7d6685e377aff6bc57d}} 
void {\bfseries ntwk\+\_\+create} ()
\begin{DoxyCompactList}\small\item\em Initialize the IP network contexts structure. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{ltemc-network_8c_a58656f017ccb1f9abe47b9ebd823706e}\label{ltemc-network_8c_a58656f017ccb1f9abe47b9ebd823706e}} 
void {\bfseries ntwk\+\_\+set\+Defaul\+Network\+Config} (uint8\+\_\+t pdp\+Context\+Id, const char $\ast$proto\+Type, const char $\ast$apn)
\begin{DoxyCompactList}\small\item\em Configure PDP Context. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{ltemc-network_8c_a6638afce89c033ad0af3d0a66ca7e4a6}\label{ltemc-network_8c_a6638afce89c033ad0af3d0a66ca7e4a6}} 
void {\bfseries NTWK\+\_\+init\+Rat\+Options} ()
\begin{DoxyCompactList}\small\item\em Initialize BGx Radio Access Technology (RAT) options. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{ltemc-network_8c_af319aa9cb0ba6997fa543f4350a46e9c}\label{ltemc-network_8c_af319aa9cb0ba6997fa543f4350a46e9c}} 
void {\bfseries NTWK\+\_\+apply\+Defaul\+Network} ()
\begin{DoxyCompactList}\small\item\em Apply the default PDP context config to BGx. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{ltemc-network_8c_af53a21ce52c3ced52d8d893fafe61971}\label{ltemc-network_8c_af53a21ce52c3ced52d8d893fafe61971}} 
void {\bfseries ntwk\+\_\+set\+Network\+Config} (uint8\+\_\+t pdp\+Context\+Id, const char $\ast$proto\+Type, const char $\ast$apn)
\item 
\mbox{\hyperlink{ltemc-types_8h_a48b1c7151c8e716c7b857586ce5d5fa5}{provider\+Info\+\_\+t}} $\ast$ \mbox{\hyperlink{ltemc-network_8c_a2707dc18381dd839b32111376c80e79d}{ntwk\+\_\+await\+Provider}} (uint16\+\_\+t wait\+Sec)
\begin{DoxyCompactList}\small\item\em Wait for a network provider name and network mode. Can be cancelled in threaded env via g\+\_\+lq\+LTEM-\/\texorpdfstring{$>$}{>}cancellation\+Request. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{ltemc-network_8c_a78fdb130909638e4ef1c7fb27dd3d4da}\label{ltemc-network_8c_a78fdb130909638e4ef1c7fb27dd3d4da}} 
void {\bfseries ntwk\+\_\+activate\+Network} (uint8\+\_\+t cntxt\+Id)
\begin{DoxyCompactList}\small\item\em Deactivate PDP Context/\+APN. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-network_8c_a94e74c231e2ee1012fc0f2031979c1f6}{ntwk\+\_\+deactivate\+Network}} (uint8\+\_\+t cntxt\+Id)
\begin{DoxyCompactList}\small\item\em Deactivate PDP Context/\+APN. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ltemc-types_8h_a48b1c7151c8e716c7b857586ce5d5fa5}{provider\+Info\+\_\+t}} $\ast$ \mbox{\hyperlink{ltemc-network_8c_a740864a6bdbdf1882703457e202cf0da}{ntwk\+\_\+get\+Provider\+Info}} ()
\begin{DoxyCompactList}\small\item\em Get current provider information. If not connected to a provider will be an empty provider\+Info struct. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{ltemc-network_8c_a5befd48d490f92aaa00cff6f7be6e770}{ntwk\+\_\+get\+Active\+Network\+Count}} ()
\begin{DoxyCompactList}\small\item\em Get count of APN active data contexts from BGx. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ltemc-types_8h_ae26f0ad19cc23e69b5636940bc7067d6}{network\+Info\+\_\+t}} $\ast$ \mbox{\hyperlink{ltemc-network_8c_af5f610f4cdea52a12ed6d00d44d61c9a}{ntwk\+\_\+get\+Network\+Info}} (uint8\+\_\+t pdp\+Context\+Id)
\begin{DoxyCompactList}\small\item\em Get network (PDP) information. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-network_8c_a3ce01ae762b14049637ad7679477ec37}{ntwk\+\_\+get\+Providers}} (char $\ast$providers\+List, uint16\+\_\+t list\+Sz)
\begin{DoxyCompactList}\small\item\em Development/diagnostic function to retrieve visible providers from cell radio. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{ltemc-network_8c_aa520cbfde107f228ddd40be60d2b6905}\label{ltemc-network_8c_aa520cbfde107f228ddd40be60d2b6905}} 
\mbox{\hyperlink{ltemc-internal_8h_a5f38bbe75173238b7cfd922a17c69b27}{ltem\+Device\+\_\+t}} {\bfseries g\+\_\+lq\+LTEM}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Public API controlling modem interface with the cellular network. 

\DoxyHorRuler{0}


\begin{DoxyAuthor}{Author}
Greg Terrell, Loo\+UQ Incorporated
\end{DoxyAuthor}
{\bfseries{Loo\+UQ Incorporated}}~\newline
\href{mailto:answers@loouq.com}{\texttt{ answers@loouq.\+com}}~\newline
807 Airport Access Road, Suite 201, Traverse City, MI 49686 USA~\newline
~\newline
Copyright (c) 2020-\/2023 Loo\+UQ Incorporated.~\newline
This project is released under the GPL-\/3.\+0 License.

\DoxyHorRuler{0}
 \begin{DoxyVerb}This project is released under the GPL-3.0 License.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.
\end{DoxyVerb}
 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{ltemc-network_8c_a2707dc18381dd839b32111376c80e79d}\label{ltemc-network_8c_a2707dc18381dd839b32111376c80e79d}} 
\index{ltemc-\/network.c@{ltemc-\/network.c}!ntwk\_awaitProvider@{ntwk\_awaitProvider}}
\index{ntwk\_awaitProvider@{ntwk\_awaitProvider}!ltemc-\/network.c@{ltemc-\/network.c}}
\doxysubsubsection{\texorpdfstring{ntwk\_awaitProvider()}{ntwk\_awaitProvider()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ltemc-types_8h_a48b1c7151c8e716c7b857586ce5d5fa5}{provider\+Info\+\_\+t}} $\ast$ ntwk\+\_\+await\+Provider (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{wait\+Sec }\end{DoxyParamCaption})}



Wait for a network provider name and network mode. Can be cancelled in threaded env via g\+\_\+lq\+LTEM-\/\texorpdfstring{$>$}{>}cancellation\+Request. 

Wait for a network operator name and network mode. Can be cancelled in threaded env via g\+\_\+ltem-\/\texorpdfstring{$>$}{>}cancellation\+Request. \mbox{\Hypertarget{ltemc-network_8c_a94e74c231e2ee1012fc0f2031979c1f6}\label{ltemc-network_8c_a94e74c231e2ee1012fc0f2031979c1f6}} 
\index{ltemc-\/network.c@{ltemc-\/network.c}!ntwk\_deactivateNetwork@{ntwk\_deactivateNetwork}}
\index{ntwk\_deactivateNetwork@{ntwk\_deactivateNetwork}!ltemc-\/network.c@{ltemc-\/network.c}}
\doxysubsubsection{\texorpdfstring{ntwk\_deactivateNetwork()}{ntwk\_deactivateNetwork()}}
{\footnotesize\ttfamily void ntwk\+\_\+deactivate\+Network (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{context\+Id }\end{DoxyParamCaption})}



Deactivate PDP Context/\+APN. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em context\+Id} & The APN number to operate on. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc-network_8c_a5befd48d490f92aaa00cff6f7be6e770}\label{ltemc-network_8c_a5befd48d490f92aaa00cff6f7be6e770}} 
\index{ltemc-\/network.c@{ltemc-\/network.c}!ntwk\_getActiveNetworkCount@{ntwk\_getActiveNetworkCount}}
\index{ntwk\_getActiveNetworkCount@{ntwk\_getActiveNetworkCount}!ltemc-\/network.c@{ltemc-\/network.c}}
\doxysubsubsection{\texorpdfstring{ntwk\_getActiveNetworkCount()}{ntwk\_getActiveNetworkCount()}}
{\footnotesize\ttfamily uint8\+\_\+t ntwk\+\_\+get\+Active\+Network\+Count (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Get count of APN active data contexts from BGx. 

\begin{DoxyReturn}{Returns}
Count of active data contexts (BGx max is 3). 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-network_8c_af5f610f4cdea52a12ed6d00d44d61c9a}\label{ltemc-network_8c_af5f610f4cdea52a12ed6d00d44d61c9a}} 
\index{ltemc-\/network.c@{ltemc-\/network.c}!ntwk\_getNetworkInfo@{ntwk\_getNetworkInfo}}
\index{ntwk\_getNetworkInfo@{ntwk\_getNetworkInfo}!ltemc-\/network.c@{ltemc-\/network.c}}
\doxysubsubsection{\texorpdfstring{ntwk\_getNetworkInfo()}{ntwk\_getNetworkInfo()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ltemc-types_8h_ae26f0ad19cc23e69b5636940bc7067d6}{network\+Info\+\_\+t}} $\ast$ ntwk\+\_\+get\+Network\+Info (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{pdp\+Context\+Id }\end{DoxyParamCaption})}



Get network (PDP) information. 

Get PDP network information. \mbox{\Hypertarget{ltemc-network_8c_a740864a6bdbdf1882703457e202cf0da}\label{ltemc-network_8c_a740864a6bdbdf1882703457e202cf0da}} 
\index{ltemc-\/network.c@{ltemc-\/network.c}!ntwk\_getProviderInfo@{ntwk\_getProviderInfo}}
\index{ntwk\_getProviderInfo@{ntwk\_getProviderInfo}!ltemc-\/network.c@{ltemc-\/network.c}}
\doxysubsubsection{\texorpdfstring{ntwk\_getProviderInfo()}{ntwk\_getProviderInfo()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ltemc-types_8h_a48b1c7151c8e716c7b857586ce5d5fa5}{provider\+Info\+\_\+t}} $\ast$ ntwk\+\_\+get\+Provider\+Info (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Get current provider information. If not connected to a provider will be an empty provider\+Info struct. 

\begin{DoxyReturn}{Returns}
Struct containing the network operator name (oper\+Name) and network mode (ntwk\+Mode). 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-network_8c_a3ce01ae762b14049637ad7679477ec37}\label{ltemc-network_8c_a3ce01ae762b14049637ad7679477ec37}} 
\index{ltemc-\/network.c@{ltemc-\/network.c}!ntwk\_getProviders@{ntwk\_getProviders}}
\index{ntwk\_getProviders@{ntwk\_getProviders}!ltemc-\/network.c@{ltemc-\/network.c}}
\doxysubsubsection{\texorpdfstring{ntwk\_getProviders()}{ntwk\_getProviders()}}
{\footnotesize\ttfamily void ntwk\+\_\+get\+Providers (\begin{DoxyParamCaption}\item[{char $\ast$}]{providers\+List,  }\item[{uint16\+\_\+t}]{list\+Sz }\end{DoxyParamCaption})}



Development/diagnostic function to retrieve visible providers from cell radio. 

Development/diagnostic function to retrieve visible providers from radio. 