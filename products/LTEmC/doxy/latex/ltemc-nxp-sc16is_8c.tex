\hypertarget{ltemc-nxp-sc16is_8c}{}\doxysection{C\+:/\+Users/\+Greg\+Terrell/\+Documents/\+Code\+Dev/\+Arduino/libraries/\+Loo\+UQ-\/\+LTEm\+C/src/ltemc-\/nxp-\/sc16is.c File Reference}
\label{ltemc-nxp-sc16is_8c}\index{C:/Users/GregTerrell/Documents/CodeDev/Arduino/libraries/LooUQ-\/LTEmC/src/ltemc-\/nxp-\/sc16is.c@{C:/Users/GregTerrell/Documents/CodeDev/Arduino/libraries/LooUQ-\/LTEmC/src/ltemc-\/nxp-\/sc16is.c}}


LTEmC INTERNAL SPI/\+UART support.  


{\ttfamily \#include $<$jlink\+Rtt.\+h$>$}\newline
{\ttfamily \#include \char`\"{}ltemc-\/internal.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}lq-\/platform.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ltemc-\/nxp-\/sc16is.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{ltemc-nxp-sc16is_8c_a152fc5203b90b1cff03b7b78579b8f52}\label{ltemc-nxp-sc16is_8c_a152fc5203b90b1cff03b7b78579b8f52}} 
\#define {\bfseries \+\_\+\+DEBUG}~2
\item 
\mbox{\Hypertarget{ltemc-nxp-sc16is_8c_a2f0e3a84d1660f6424fdc69e2e1aea8d}\label{ltemc-nxp-sc16is_8c_a2f0e3a84d1660f6424fdc69e2e1aea8d}} 
\#define {\bfseries SRCFILE}~\char`\"{}NXP\char`\"{}
\item 
\#define \mbox{\hyperlink{ltemc-nxp-sc16is_8c_ac68c9cc3a2aa93d4a25933c31d0e6196}{REG\+\_\+\+MODIFY}}(REG\+\_\+\+NAME,  MODIFY\+\_\+\+ACTION)
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{ltemc-nxp-sc16is_8c_abf9daa62d261abcac1e4cb27c9e72adf}\label{ltemc-nxp-sc16is_8c_abf9daa62d261abcac1e4cb27c9e72adf}} 
{\bfseries asm} (\char`\"{}.global \+\_\+printf\+\_\+float\char`\"{})
\item 
\mbox{\Hypertarget{ltemc-nxp-sc16is_8c_a4b0e8d90c87a0320be630e248734c5e1}\label{ltemc-nxp-sc16is_8c_a4b0e8d90c87a0320be630e248734c5e1}} 
void {\bfseries S\+\_\+display\+Fifo\+Status} (const char $\ast$disp\+Msg)
\item 
void \mbox{\hyperlink{ltemc-nxp-sc16is_8c_a828934bda4ffacd5a3f8300f7bab356f}{SC16\+IS7xx\+\_\+start}} ()
\begin{DoxyCompactList}\small\item\em Configure base NXP bridge settings\+: reset, FIFO (polled mode), baud and framing. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-nxp-sc16is_8c_adada1b94043722438018bc74f784c81f}{SC16\+IS7xx\+\_\+enable\+Irq\+Mode}} ()
\begin{DoxyCompactList}\small\item\em Enable IRQ servicing for communications between SC16\+IS741 and BG9x. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{ltemc-nxp-sc16is_8c_a8ccfb7663d4ca7cee5335eb97f06e9ab}{SC16\+IS7xx\+\_\+is\+Available}} ()
\begin{DoxyCompactList}\small\item\em Read interrupt enable register, check IER for IRQ enabled (register is cleared at reset) \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{ltemc-nxp-sc16is_8c_a209d8785c37ccbc531eb37a73feb60a8}{SC16\+IS7xx\+\_\+read\+Reg}} (uint8\+\_\+t reg\+\_\+addr)
\begin{DoxyCompactList}\small\item\em Read from a SC16\+IS741A bridge register. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-nxp-sc16is_8c_a69ada6721796577cc4910900f5273118}{SC16\+IS7xx\+\_\+write\+Reg}} (uint8\+\_\+t reg\+\_\+addr, uint8\+\_\+t reg\+\_\+data)
\begin{DoxyCompactList}\small\item\em Write to a SC16\+IS741A bridge register. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-nxp-sc16is_8c_a13241994787ce057d96658b47366d76f}{SC16\+IS7xx\+\_\+read}} (void $\ast$dest, uint8\+\_\+t dest\+\_\+len)
\begin{DoxyCompactList}\small\item\em Reads through the SC16\+IS741A bridge (its RX FIFO) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-nxp-sc16is_8c_a6292427dfbc749bc8e12fadb16b7f25d}{SC16\+IS7xx\+\_\+write}} (const void $\ast$src, uint8\+\_\+t src\+\_\+len)
\begin{DoxyCompactList}\small\item\em Write through the SC16\+IS741A bridge. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc-nxp-sc16is_8c_a146c0f112933b81e851f398746a06e6c}{SC16\+IS7xx\+\_\+reset\+Fifo}} (\mbox{\hyperlink{ltemc-nxp-sc16is_8h_a80dca3b6c9389349664cb818df639eb3}{sc16\+IS7xx\+\_\+\+Fifo\+Reset\+Action\+\_\+t}} reset\+Action)
\begin{DoxyCompactList}\small\item\em Perform reset on bridge FIFO. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{ltemc-nxp-sc16is_8c_af179c6e75e2190c69a232d478de1ce98}\label{ltemc-nxp-sc16is_8c_af179c6e75e2190c69a232d478de1ce98}} 
void {\bfseries SC16\+IS7xx\+\_\+send\+Break} ()
\begin{DoxyCompactList}\small\item\em Perform reset on bridge FIFO. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{ltemc-nxp-sc16is_8c_af40dfcf2e05c938cba3c9744491b330c}\label{ltemc-nxp-sc16is_8c_af40dfcf2e05c938cba3c9744491b330c}} 
void {\bfseries SC16\+IS7xx\+\_\+flush\+Rx\+Fifo} ()
\begin{DoxyCompactList}\small\item\em Flush contents of RX FIFO. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{ltemc-nxp-sc16is_8c_a7d60f696c39aec242e589bd9f388f61a}\label{ltemc-nxp-sc16is_8c_a7d60f696c39aec242e589bd9f388f61a}} 
void {\bfseries SC16\+IS74\+\_\+\+\_\+display\+Fifo\+Status} (const char $\ast$disp\+Msg)
\begin{DoxyCompactList}\small\item\em DEBUG\+: Show FIFO buffers fill level. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{ltemc-nxp-sc16is_8c_aa520cbfde107f228ddd40be60d2b6905}\label{ltemc-nxp-sc16is_8c_aa520cbfde107f228ddd40be60d2b6905}} 
\mbox{\hyperlink{ltemc-internal_8h_a5f38bbe75173238b7cfd922a17c69b27}{ltem\+Device\+\_\+t}} {\bfseries g\+\_\+lq\+LTEM}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
LTEmC INTERNAL SPI/\+UART support. 

\DoxyHorRuler{0}


\begin{DoxyAuthor}{Author}
Greg Terrell, Jensen Miller Loo\+UQ Incorporated
\end{DoxyAuthor}
{\bfseries{Loo\+UQ Incorporated}}~\newline
\href{mailto:answers@loouq.com}{\texttt{ answers@loouq.\+com}}~\newline
807 Airport Access Road, Suite 201, Traverse City, MI 49686 USA~\newline
~\newline
Copyright (c) 2020-\/2023 Loo\+UQ Incorporated.~\newline
This project is released under the GPL-\/3.\+0 License.

\begin{DoxyWarning}{Warning}
This source unit is low-\/level processing code. Updates should only 
\end{DoxyWarning}
\hypertarget{ltemc-nxp-sc16is_8c_autotoc_md25}{}\doxysubsubsection{be performed as directed by Loo\+UQ.}\label{ltemc-nxp-sc16is_8c_autotoc_md25}
\begin{DoxyVerb}This project is released under the GPL-3.0 License.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.
\end{DoxyVerb}
 

\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{ltemc-nxp-sc16is_8c_ac68c9cc3a2aa93d4a25933c31d0e6196}\label{ltemc-nxp-sc16is_8c_ac68c9cc3a2aa93d4a25933c31d0e6196}} 
\index{ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}!REG\_MODIFY@{REG\_MODIFY}}
\index{REG\_MODIFY@{REG\_MODIFY}!ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}}
\doxysubsubsection{\texorpdfstring{REG\_MODIFY}{REG\_MODIFY}}
{\footnotesize\ttfamily \#define REG\+\_\+\+MODIFY(\begin{DoxyParamCaption}\item[{}]{REG\+\_\+\+NAME,  }\item[{}]{MODIFY\+\_\+\+ACTION }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{REG\_NAME\ REG\_NAME\#\#\_reg\ =\ \{0\};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{REG\_NAME\#\#\_reg.reg\ =\ \mbox{\hyperlink{ltemc-nxp-sc16is_8c_a209d8785c37ccbc531eb37a73feb60a8}{SC16IS7xx\_readReg}}(REG\_NAME\#\#\_regAddr);\ \(\backslash\)}
\DoxyCodeLine{MODIFY\_ACTION\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{SC16IS7xx\_writeReg(REG\_NAME\#\#\_regAddr,\ REG\_NAME\#\#\_reg.reg);}

\end{DoxyCode}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{ltemc-nxp-sc16is_8c_adada1b94043722438018bc74f784c81f}\label{ltemc-nxp-sc16is_8c_adada1b94043722438018bc74f784c81f}} 
\index{ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}!SC16IS7xx\_enableIrqMode@{SC16IS7xx\_enableIrqMode}}
\index{SC16IS7xx\_enableIrqMode@{SC16IS7xx\_enableIrqMode}!ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}}
\doxysubsubsection{\texorpdfstring{SC16IS7xx\_enableIrqMode()}{SC16IS7xx\_enableIrqMode()}}
{\footnotesize\ttfamily void SC16\+IS7xx\+\_\+enable\+Irq\+Mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Enable IRQ servicing for communications between SC16\+IS741 and BG9x. 

Enable IRQ servicing for communications between SC16\+IS741 and BG96. \mbox{\Hypertarget{ltemc-nxp-sc16is_8c_a8ccfb7663d4ca7cee5335eb97f06e9ab}\label{ltemc-nxp-sc16is_8c_a8ccfb7663d4ca7cee5335eb97f06e9ab}} 
\index{ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}!SC16IS7xx\_isAvailable@{SC16IS7xx\_isAvailable}}
\index{SC16IS7xx\_isAvailable@{SC16IS7xx\_isAvailable}!ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}}
\doxysubsubsection{\texorpdfstring{SC16IS7xx\_isAvailable()}{SC16IS7xx\_isAvailable()}}
{\footnotesize\ttfamily bool SC16\+IS7xx\+\_\+is\+Available (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Read interrupt enable register, check IER for IRQ enabled (register is cleared at reset) 

Perform simple write/read using SC16\+IS741A scratchpad register. Used to test SPI communications. \mbox{\Hypertarget{ltemc-nxp-sc16is_8c_a13241994787ce057d96658b47366d76f}\label{ltemc-nxp-sc16is_8c_a13241994787ce057d96658b47366d76f}} 
\index{ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}!SC16IS7xx\_read@{SC16IS7xx\_read}}
\index{SC16IS7xx\_read@{SC16IS7xx\_read}!ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}}
\doxysubsubsection{\texorpdfstring{SC16IS7xx\_read()}{SC16IS7xx\_read()}}
{\footnotesize\ttfamily void SC16\+IS7xx\+\_\+read (\begin{DoxyParamCaption}\item[{void $\ast$}]{dest,  }\item[{uint8\+\_\+t}]{dest\+\_\+len }\end{DoxyParamCaption})}



Reads through the SC16\+IS741A bridge (its RX FIFO) 


\begin{DoxyParams}{Parameters}
{\em dest} & \mbox{[}out\mbox{]} -\/ The destination buffer \\
\hline
{\em dest\+\_\+len} & \mbox{[}in\mbox{]} -\/ The length of the destination buffer \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc-nxp-sc16is_8c_a209d8785c37ccbc531eb37a73feb60a8}\label{ltemc-nxp-sc16is_8c_a209d8785c37ccbc531eb37a73feb60a8}} 
\index{ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}!SC16IS7xx\_readReg@{SC16IS7xx\_readReg}}
\index{SC16IS7xx\_readReg@{SC16IS7xx\_readReg}!ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}}
\doxysubsubsection{\texorpdfstring{SC16IS7xx\_readReg()}{SC16IS7xx\_readReg()}}
{\footnotesize\ttfamily uint8\+\_\+t SC16\+IS7xx\+\_\+read\+Reg (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{reg\+\_\+addr }\end{DoxyParamCaption})}



Read from a SC16\+IS741A bridge register. 


\begin{DoxyParams}{Parameters}
{\em reg\+\_\+addr} & \mbox{[}in\mbox{]} -\/ The register address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
reg\+\_\+data -\/ Byte of data read from register 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-nxp-sc16is_8c_a146c0f112933b81e851f398746a06e6c}\label{ltemc-nxp-sc16is_8c_a146c0f112933b81e851f398746a06e6c}} 
\index{ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}!SC16IS7xx\_resetFifo@{SC16IS7xx\_resetFifo}}
\index{SC16IS7xx\_resetFifo@{SC16IS7xx\_resetFifo}!ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}}
\doxysubsubsection{\texorpdfstring{SC16IS7xx\_resetFifo()}{SC16IS7xx\_resetFifo()}}
{\footnotesize\ttfamily void SC16\+IS7xx\+\_\+reset\+Fifo (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-nxp-sc16is_8h_a80dca3b6c9389349664cb818df639eb3}{sc16\+IS7xx\+\_\+\+Fifo\+Reset\+Action\+\_\+t}}}]{reset\+Action }\end{DoxyParamCaption})}



Perform reset on bridge FIFO. 


\begin{DoxyParams}{Parameters}
{\em reset\+Action} & \mbox{[}in\mbox{]} -\/ What to reset TX, RX or both \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc-nxp-sc16is_8c_a828934bda4ffacd5a3f8300f7bab356f}\label{ltemc-nxp-sc16is_8c_a828934bda4ffacd5a3f8300f7bab356f}} 
\index{ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}!SC16IS7xx\_start@{SC16IS7xx\_start}}
\index{SC16IS7xx\_start@{SC16IS7xx\_start}!ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}}
\doxysubsubsection{\texorpdfstring{SC16IS7xx\_start()}{SC16IS7xx\_start()}}
{\footnotesize\ttfamily void SC16\+IS7xx\+\_\+start (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Configure base NXP bridge settings\+: reset, FIFO (polled mode), baud and framing. 

Configure base NXP bridge settings\+: reset (opt), FIFO, trigger levels (no trig IRQ yet), baud and framing. \mbox{\Hypertarget{ltemc-nxp-sc16is_8c_a6292427dfbc749bc8e12fadb16b7f25d}\label{ltemc-nxp-sc16is_8c_a6292427dfbc749bc8e12fadb16b7f25d}} 
\index{ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}!SC16IS7xx\_write@{SC16IS7xx\_write}}
\index{SC16IS7xx\_write@{SC16IS7xx\_write}!ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}}
\doxysubsubsection{\texorpdfstring{SC16IS7xx\_write()}{SC16IS7xx\_write()}}
{\footnotesize\ttfamily void SC16\+IS7xx\+\_\+write (\begin{DoxyParamCaption}\item[{const void $\ast$}]{src,  }\item[{uint8\+\_\+t}]{src\+\_\+len }\end{DoxyParamCaption})}



Write through the SC16\+IS741A bridge. 


\begin{DoxyParams}{Parameters}
{\em src} & \mbox{[}in\mbox{]} -\/ The source data to write \\
\hline
{\em src\+\_\+len} & \mbox{[}in\mbox{]} -\/ The length of the source \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc-nxp-sc16is_8c_a69ada6721796577cc4910900f5273118}\label{ltemc-nxp-sc16is_8c_a69ada6721796577cc4910900f5273118}} 
\index{ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}!SC16IS7xx\_writeReg@{SC16IS7xx\_writeReg}}
\index{SC16IS7xx\_writeReg@{SC16IS7xx\_writeReg}!ltemc-\/nxp-\/sc16is.c@{ltemc-\/nxp-\/sc16is.c}}
\doxysubsubsection{\texorpdfstring{SC16IS7xx\_writeReg()}{SC16IS7xx\_writeReg()}}
{\footnotesize\ttfamily void SC16\+IS7xx\+\_\+write\+Reg (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{reg\+\_\+addr,  }\item[{uint8\+\_\+t}]{reg\+\_\+data }\end{DoxyParamCaption})}



Write to a SC16\+IS741A bridge register. 


\begin{DoxyParams}{Parameters}
{\em reg\+\_\+addr} & \mbox{[}in\mbox{]} -\/ The register address \\
\hline
{\em reg\+\_\+data} & \mbox{[}in\mbox{]} -\/ Pointer to the data to write to the register \\
\hline
\end{DoxyParams}
