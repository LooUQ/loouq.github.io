\hypertarget{ltemc-filesys_8c}{}\doxysection{C\+:/\+Users/\+Greg\+Terrell/\+Documents/\+Code\+Dev/\+Arduino/libraries/\+Loo\+UQ-\/\+LTEm\+C/src/ltemc-\/filesys.c File Reference}
\label{ltemc-filesys_8c}\index{C:/Users/GregTerrell/Documents/CodeDev/Arduino/libraries/LooUQ-\/LTEmC/src/ltemc-\/filesys.c@{C:/Users/GregTerrell/Documents/CodeDev/Arduino/libraries/LooUQ-\/LTEmC/src/ltemc-\/filesys.c}}


Public API persistent file system support.  


{\ttfamily \#include $<$jlink\+Rtt.\+h$>$}\newline
{\ttfamily \#include \char`\"{}ltemc-\/internal.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ltemc-\/filesys.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{ltemc-filesys_8c_a152fc5203b90b1cff03b7b78579b8f52}\label{ltemc-filesys_8c_a152fc5203b90b1cff03b7b78579b8f52}} 
\#define {\bfseries \+\_\+\+DEBUG}~2
\item 
\mbox{\Hypertarget{ltemc-filesys_8c_a7acb4d06a9fd952f51471791f06d60a8}\label{ltemc-filesys_8c_a7acb4d06a9fd952f51471791f06d60a8}} 
\#define {\bfseries PRINTF}(c\+\_\+,  f\+\_\+,  \+\_\+\+\_\+\+VA\+\_\+\+ARGS\+\_\+\+\_\+...)~do \{ rtt\+\_\+printf(c\+\_\+, (f\+\_\+), \#\# \+\_\+\+\_\+\+VA\+\_\+\+ARGS\+\_\+\+\_\+); \} while(0)
\item 
\mbox{\Hypertarget{ltemc-filesys_8c_a2f0e3a84d1660f6424fdc69e2e1aea8d}\label{ltemc-filesys_8c_a2f0e3a84d1660f6424fdc69e2e1aea8d}} 
\#define {\bfseries SRCFILE}~\char`\"{}FIL\char`\"{}
\item 
\mbox{\Hypertarget{ltemc-filesys_8c_a74e75242132eaabbc1c512488a135926}\label{ltemc-filesys_8c_a74e75242132eaabbc1c512488a135926}} 
\#define {\bfseries MIN}(x,  y)~(((x) $<$ (y)) ? (x) \+: (y))
\item 
\mbox{\Hypertarget{ltemc-filesys_8c_aff9931d7524c88e07743af6535b20761}\label{ltemc-filesys_8c_aff9931d7524c88e07743af6535b20761}} 
\#define {\bfseries MAX}(X,  Y)~(((X) $>$ (Y)) ? (X) \+: (Y))
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{ltemc-filesys_8c_abf9daa62d261abcac1e4cb27c9e72adf}\label{ltemc-filesys_8c_abf9daa62d261abcac1e4cb27c9e72adf}} 
{\bfseries asm} (\char`\"{}.global \+\_\+printf\+\_\+float\char`\"{})
\item 
\mbox{\Hypertarget{ltemc-filesys_8c_a51bdd1f8f3b1b3de04048c75b1215eff}\label{ltemc-filesys_8c_a51bdd1f8f3b1b3de04048c75b1215eff}} 
\mbox{\hyperlink{ltemc-types_8h_a59d50b328873ce5798b52fac8d0886a4}{stream\+Ctrl\+\_\+t}} $\ast$ {\bfseries S\+\_\+\+\_\+get\+Fs\+Stream} ()
\item 
\mbox{\Hypertarget{ltemc-filesys_8c_ab06d7b3a2140dc65c7cf53eb987a34ac}\label{ltemc-filesys_8c_ab06d7b3a2140dc65c7cf53eb987a34ac}} 
result\+Code\+\_\+t {\bfseries file\+\_\+get\+FSInfo} (\mbox{\hyperlink{structfilesys_info__tag}{filesys\+Info\+\_\+t}} $\ast$fs\+Info)
\begin{DoxyCompactList}\small\item\em get filesystem information. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{ltemc-filesys_8c_acf6784576fdefdfed948f9a7359d1f16}\label{ltemc-filesys_8c_acf6784576fdefdfed948f9a7359d1f16}} 
result\+Code\+\_\+t {\bfseries file\+\_\+get\+Filelist} (\mbox{\hyperlink{structfile_list_result__tag}{file\+List\+Result\+\_\+t}} $\ast$file\+List, const char $\ast$filename)
\begin{DoxyCompactList}\small\item\em get list of files from filesystem. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{ltemc-filesys_8c_a026c2d8bdf053896303f9f9fb44e095c}\label{ltemc-filesys_8c_a026c2d8bdf053896303f9f9fb44e095c}} 
void {\bfseries file\+\_\+set\+Recvr\+Func} (\mbox{\hyperlink{ltemc-filesys_8h_a8f42a3625e8f773cf708ed261c2374ce}{file\+Receiver\+\_\+func\+\_\+t}} file\+Recvr\+\_\+func)
\begin{DoxyCompactList}\small\item\em set file read data receiver function (here or with filesys\+\_\+open). Not required if file is write only access. \end{DoxyCompactList}\item 
result\+Code\+\_\+t \mbox{\hyperlink{ltemc-filesys_8c_ad33cfcd9eb4cab585adf4c14099baf08}{file\+\_\+open}} (const char $\ast$filename, file\+Open\+Mode\+\_\+t open\+Mode, uint16\+\_\+t $\ast$file\+Handle)
\begin{DoxyCompactList}\small\item\em Open file for read/write. \end{DoxyCompactList}\item 
result\+Code\+\_\+t \mbox{\hyperlink{ltemc-filesys_8c_adca0c264d5a2ae30d31bf450d985c805}{file\+\_\+get\+Open\+Files}} (char $\ast$file\+Info, uint16\+\_\+t file\+Info\+Sz)
\begin{DoxyCompactList}\small\item\em Get a list of open files, including their mode and file handles. \end{DoxyCompactList}\item 
result\+Code\+\_\+t \mbox{\hyperlink{ltemc-filesys_8c_af9e364960756056df997906fc0888181}{file\+\_\+close}} (uint16\+\_\+t file\+Handle)
\begin{DoxyCompactList}\small\item\em Closes the file. \end{DoxyCompactList}\item 
result\+Code\+\_\+t \mbox{\hyperlink{ltemc-filesys_8c_a8ad4884de6cc8c1fb5a83152d429557e}{file\+\_\+close\+All}} ()
\begin{DoxyCompactList}\small\item\em Closes all open files. \end{DoxyCompactList}\item 
result\+Code\+\_\+t \mbox{\hyperlink{ltemc-filesys_8c_aa0adfb24daccbfc7d50af35b77da32b5}{file\+\_\+read}} (uint16\+\_\+t file\+Handle, uint16\+\_\+t read\+Sz)
\begin{DoxyCompactList}\small\item\em Closes the file. \end{DoxyCompactList}\item 
result\+Code\+\_\+t \mbox{\hyperlink{ltemc-filesys_8c_abbc1a4c61e58d679d682fe752b6bfe6a}{file\+\_\+write}} (uint16\+\_\+t file\+Handle, const char $\ast$write\+Data, uint16\+\_\+t write\+Sz, \mbox{\hyperlink{structfile_write_result__tag}{file\+Write\+Result\+\_\+t}} $\ast$write\+Result)
\begin{DoxyCompactList}\small\item\em Closes the file. \end{DoxyCompactList}\item 
result\+Code\+\_\+t \mbox{\hyperlink{ltemc-filesys_8c_a9cd6e92742852ab37a2866db9c96847b}{file\+\_\+seek}} (uint16\+\_\+t file\+Handle, uint32\+\_\+t offset, file\+Seek\+Mode\+\_\+t seek\+From)
\begin{DoxyCompactList}\small\item\em Set the position of the file pointer. \end{DoxyCompactList}\item 
result\+Code\+\_\+t \mbox{\hyperlink{ltemc-filesys_8c_a7e0e1edb89b3ce76a788c42891cfd370}{file\+\_\+get\+Position}} (uint16\+\_\+t file\+Handle, uint32\+\_\+t $\ast$file\+Ptr)
\begin{DoxyCompactList}\small\item\em Closes the file. \end{DoxyCompactList}\item 
result\+Code\+\_\+t \mbox{\hyperlink{ltemc-filesys_8c_a9f21f445750167387749e5fa818a0ff1}{file\+\_\+truncate}} (uint16\+\_\+t file\+Handle)
\begin{DoxyCompactList}\small\item\em Truncate all the data beyond the CURRENT position of the file pointer. \end{DoxyCompactList}\item 
result\+Code\+\_\+t \mbox{\hyperlink{ltemc-filesys_8c_ace8ab8614116e962f9ca6e501a75d838}{file\+\_\+delete}} (const char $\ast$filename)
\begin{DoxyCompactList}\small\item\em Delete a file from the file system. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{ltemc-filesys_8c_aa520cbfde107f228ddd40be60d2b6905}\label{ltemc-filesys_8c_aa520cbfde107f228ddd40be60d2b6905}} 
\mbox{\hyperlink{ltemc-internal_8h_a5f38bbe75173238b7cfd922a17c69b27}{ltem\+Device\+\_\+t}} {\bfseries g\+\_\+lq\+LTEM}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Public API persistent file system support. 

\DoxyHorRuler{0}


\begin{DoxyAuthor}{Author}
Greg Terrell, Loo\+UQ Incorporated
\end{DoxyAuthor}
{\bfseries{Loo\+UQ Incorporated}}~\newline
\href{mailto:answers@loouq.com}{\texttt{ answers@loouq.\+com}}~\newline
807 Airport Access Road, Suite 201, Traverse City, MI 49686 USA~\newline
~\newline
Copyright (c) 2020-\/2023 Loo\+UQ Incorporated.~\newline
This project is released under the GPL-\/3.\+0 License.

\DoxyHorRuler{0}
 \begin{DoxyVerb}This project is released under the GPL-3.0 License.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.
\end{DoxyVerb}
 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{ltemc-filesys_8c_af9e364960756056df997906fc0888181}\label{ltemc-filesys_8c_af9e364960756056df997906fc0888181}} 
\index{ltemc-\/filesys.c@{ltemc-\/filesys.c}!file\_close@{file\_close}}
\index{file\_close@{file\_close}!ltemc-\/filesys.c@{ltemc-\/filesys.c}}
\doxysubsubsection{\texorpdfstring{file\_close()}{file\_close()}}
{\footnotesize\ttfamily result\+Code\+\_\+t file\+\_\+close (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{file\+Handle }\end{DoxyParamCaption})}



Closes the file. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em file\+Handle} & -\/ Numeric handle for the file to close. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Result\+Code=200 if successful, otherwise error code (HTTP status type). 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-filesys_8c_a8ad4884de6cc8c1fb5a83152d429557e}\label{ltemc-filesys_8c_a8ad4884de6cc8c1fb5a83152d429557e}} 
\index{ltemc-\/filesys.c@{ltemc-\/filesys.c}!file\_closeAll@{file\_closeAll}}
\index{file\_closeAll@{file\_closeAll}!ltemc-\/filesys.c@{ltemc-\/filesys.c}}
\doxysubsubsection{\texorpdfstring{file\_closeAll()}{file\_closeAll()}}
{\footnotesize\ttfamily result\+Code\+\_\+t file\+\_\+close\+All (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Closes all open files. 

\begin{DoxyReturn}{Returns}
Result\+Code=200 if successful, otherwise error code (HTTP status type). 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-filesys_8c_ace8ab8614116e962f9ca6e501a75d838}\label{ltemc-filesys_8c_ace8ab8614116e962f9ca6e501a75d838}} 
\index{ltemc-\/filesys.c@{ltemc-\/filesys.c}!file\_delete@{file\_delete}}
\index{file\_delete@{file\_delete}!ltemc-\/filesys.c@{ltemc-\/filesys.c}}
\doxysubsubsection{\texorpdfstring{file\_delete()}{file\_delete()}}
{\footnotesize\ttfamily result\+Code\+\_\+t file\+\_\+delete (\begin{DoxyParamCaption}\item[{const char $\ast$}]{file\+Name }\end{DoxyParamCaption})}



Delete a file from the file system. 


\begin{DoxyParams}{Parameters}
{\em file\+Name} & \mbox{[}in\mbox{]} -\/ \char`\"{}$\ast$\char`\"{} or filename to delete. Wildcard with filename is not allowed. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Result\+Code=200 if successful, otherwise error code (HTTP status type). 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-filesys_8c_adca0c264d5a2ae30d31bf450d985c805}\label{ltemc-filesys_8c_adca0c264d5a2ae30d31bf450d985c805}} 
\index{ltemc-\/filesys.c@{ltemc-\/filesys.c}!file\_getOpenFiles@{file\_getOpenFiles}}
\index{file\_getOpenFiles@{file\_getOpenFiles}!ltemc-\/filesys.c@{ltemc-\/filesys.c}}
\doxysubsubsection{\texorpdfstring{file\_getOpenFiles()}{file\_getOpenFiles()}}
{\footnotesize\ttfamily result\+Code\+\_\+t file\+\_\+get\+Open\+Files (\begin{DoxyParamCaption}\item[{char $\ast$}]{fileinfo,  }\item[{uint16\+\_\+t}]{fileinfo\+Sz }\end{DoxyParamCaption})}



Get a list of open files, including their mode and file handles. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em fileinfo} & -\/ Char buffer to fill with information about open files. \\
\hline
\mbox{\texttt{ in}}  & {\em fileinfo\+Sz} & -\/ Buffer size (max chars to return). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Result\+Code=200 if successful, otherwise error code (HTTP status type). 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-filesys_8c_a7e0e1edb89b3ce76a788c42891cfd370}\label{ltemc-filesys_8c_a7e0e1edb89b3ce76a788c42891cfd370}} 
\index{ltemc-\/filesys.c@{ltemc-\/filesys.c}!file\_getPosition@{file\_getPosition}}
\index{file\_getPosition@{file\_getPosition}!ltemc-\/filesys.c@{ltemc-\/filesys.c}}
\doxysubsubsection{\texorpdfstring{file\_getPosition()}{file\_getPosition()}}
{\footnotesize\ttfamily result\+Code\+\_\+t file\+\_\+get\+Position (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{file\+Handle,  }\item[{uint32\+\_\+t $\ast$}]{file\+Ptr }\end{DoxyParamCaption})}



Closes the file. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em file\+Handle} & -\/ Numeric handle for the file to close. \\
\hline
\mbox{\texttt{ out}}  & {\em file\+Ptr} & -\/ Pointer to location (integer file pointer) within file\+: \char`\"{}current\char`\"{}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Result\+Code=200 if successful, otherwise error code (HTTP status type). 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-filesys_8c_ad33cfcd9eb4cab585adf4c14099baf08}\label{ltemc-filesys_8c_ad33cfcd9eb4cab585adf4c14099baf08}} 
\index{ltemc-\/filesys.c@{ltemc-\/filesys.c}!file\_open@{file\_open}}
\index{file\_open@{file\_open}!ltemc-\/filesys.c@{ltemc-\/filesys.c}}
\doxysubsubsection{\texorpdfstring{file\_open()}{file\_open()}}
{\footnotesize\ttfamily result\+Code\+\_\+t file\+\_\+open (\begin{DoxyParamCaption}\item[{const char $\ast$}]{file\+Name,  }\item[{file\+Open\+Mode\+\_\+t}]{open\+Mode,  }\item[{uint16\+\_\+t $\ast$}]{file\+Handle }\end{DoxyParamCaption})}



Open file for read/write. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em file\+Name} & -\/ Char array with the name of the file to open (recommended DOS 8.\+3 format). \\
\hline
\mbox{\texttt{ in}}  & {\em open\+Mode} & -\/ Enum with file behavior after file is successfully opened. \\
\hline
\mbox{\texttt{ out}}  & {\em file\+Handle} & -\/ Pointer to the numeric handle for the file to close. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Result\+Code=200 if successful, otherwise error code (HTTP status type). 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-filesys_8c_aa0adfb24daccbfc7d50af35b77da32b5}\label{ltemc-filesys_8c_aa0adfb24daccbfc7d50af35b77da32b5}} 
\index{ltemc-\/filesys.c@{ltemc-\/filesys.c}!file\_read@{file\_read}}
\index{file\_read@{file\_read}!ltemc-\/filesys.c@{ltemc-\/filesys.c}}
\doxysubsubsection{\texorpdfstring{file\_read()}{file\_read()}}
{\footnotesize\ttfamily result\+Code\+\_\+t file\+\_\+read (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{file\+Handle,  }\item[{uint16\+\_\+t}]{read\+Sz }\end{DoxyParamCaption})}



Closes the file. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em file\+Handle} & -\/ Numeric handle for the file to close. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Result\+Code=200 if successful, otherwise error code (HTTP status type). 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-filesys_8c_a9cd6e92742852ab37a2866db9c96847b}\label{ltemc-filesys_8c_a9cd6e92742852ab37a2866db9c96847b}} 
\index{ltemc-\/filesys.c@{ltemc-\/filesys.c}!file\_seek@{file\_seek}}
\index{file\_seek@{file\_seek}!ltemc-\/filesys.c@{ltemc-\/filesys.c}}
\doxysubsubsection{\texorpdfstring{file\_seek()}{file\_seek()}}
{\footnotesize\ttfamily result\+Code\+\_\+t file\+\_\+seek (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{file\+Handle,  }\item[{uint32\+\_\+t}]{offset,  }\item[{file\+Seek\+Mode\+\_\+t}]{seek\+From }\end{DoxyParamCaption})}



Set the position of the file pointer. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em file\+Handle} & -\/ Numeric handle for the file to operate with. \\
\hline
\mbox{\texttt{ in}}  & {\em offset} & -\/ Number of bytes to move the file pointer by. \\
\hline
\mbox{\texttt{ in}}  & {\em seek\+From} & -\/ The starting point for the pointer movement (positive only).\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Result\+Code=200 if successful, otherwise error code (HTTP status type). 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc-filesys_8c_a9f21f445750167387749e5fa818a0ff1}\label{ltemc-filesys_8c_a9f21f445750167387749e5fa818a0ff1}} 
\index{ltemc-\/filesys.c@{ltemc-\/filesys.c}!file\_truncate@{file\_truncate}}
\index{file\_truncate@{file\_truncate}!ltemc-\/filesys.c@{ltemc-\/filesys.c}}
\doxysubsubsection{\texorpdfstring{file\_truncate()}{file\_truncate()}}
{\footnotesize\ttfamily result\+Code\+\_\+t file\+\_\+truncate (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{file\+Handle }\end{DoxyParamCaption})}



Truncate all the data beyond the CURRENT position of the file pointer. 

Truncate all the data beyond the current position of the file pointer. \mbox{\Hypertarget{ltemc-filesys_8c_abbc1a4c61e58d679d682fe752b6bfe6a}\label{ltemc-filesys_8c_abbc1a4c61e58d679d682fe752b6bfe6a}} 
\index{ltemc-\/filesys.c@{ltemc-\/filesys.c}!file\_write@{file\_write}}
\index{file\_write@{file\_write}!ltemc-\/filesys.c@{ltemc-\/filesys.c}}
\doxysubsubsection{\texorpdfstring{file\_write()}{file\_write()}}
{\footnotesize\ttfamily result\+Code\+\_\+t file\+\_\+write (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{file\+Handle,  }\item[{const char $\ast$}]{write\+Data,  }\item[{uint16\+\_\+t}]{write\+Sz,  }\item[{\mbox{\hyperlink{structfile_write_result__tag}{file\+Write\+Result\+\_\+t}} $\ast$}]{write\+Result }\end{DoxyParamCaption})}



Closes the file. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em file\+Handle} & -\/ Numeric handle for the file to close. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Result\+Code=200 if successful, otherwise error code (HTTP status type). 
\end{DoxyReturn}
