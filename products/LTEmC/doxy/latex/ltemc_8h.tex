\hypertarget{ltemc_8h}{}\doxysection{C\+:/\+Users/\+Greg\+Terrell/\+Documents/\+Code\+Dev/\+Arduino/libraries/\+Loo\+UQ-\/\+LTEm\+C/src/ltemc.h File Reference}
\label{ltemc_8h}\index{C:/Users/GregTerrell/Documents/CodeDev/Arduino/libraries/LooUQ-\/LTEmC/src/ltemc.h@{C:/Users/GregTerrell/Documents/CodeDev/Arduino/libraries/LooUQ-\/LTEmC/src/ltemc.h}}
{\ttfamily \#include $<$lq-\/types.\+h$>$}\newline
{\ttfamily \#include $<$lq-\/diagnostics.\+h$>$}\newline
{\ttfamily \#include \char`\"{}ltemc-\/types.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}lq-\/platform.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ltemc-\/atcmd.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ltemc-\/mdminfo.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ltemc-\/network.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{ltemc_8h_a35606fbdda9e7b1a8c29e14cf554f4e9}{ltem\+\_\+create}} (const \mbox{\hyperlink{structltem_pin_config__tag}{ltem\+Pin\+Config\+\_\+t}} ltem\+\_\+config, yield\+\_\+func yield\+CB, app\+Evnt\+Notify\+\_\+func event\+Notify\+CB)
\begin{DoxyCompactList}\small\item\em ASSERT and diagnostic data collection. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{ltemc_8h_adc4fe577a31799623ad85245e64dfea5}\label{ltemc_8h_adc4fe577a31799623ad85245e64dfea5}} 
void {\bfseries ltem\+\_\+destroy} ()
\begin{DoxyCompactList}\small\item\em Uninitialize the LTEm device structures. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc_8h_a0213559f7f2aa79fdb75f7b07e943ba3}{ltem\+\_\+set\+Provider\+Scan\+Seq}} (const char $\ast$sequence)
\begin{DoxyCompactList}\small\item\em Configure RAT searching sequence. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc_8h_a31dd953d011be34d9a89de070e103794}{ltem\+\_\+set\+Provider\+Scan\+Mode}} (\mbox{\hyperlink{ltemc-types_8h_a8e9d1f53c1e7c1c59f08200324201cc2}{ntwk\+Scan\+Mode\+\_\+t}} mode)
\begin{DoxyCompactList}\small\item\em Configure RAT(s) allowed to be searched. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc_8h_a073f88d1a0dd729ca7d2061392e3ccee}{ltem\+\_\+set\+Iot\+Mode}} (\mbox{\hyperlink{ltemc-types_8h_ac8e908eadfb655392c2a198d9738575e}{ntwk\+Iot\+Mode\+\_\+t}} mode)
\begin{DoxyCompactList}\small\item\em Configure the network category to be searched under LTE RAT. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc_8h_ad8518289ac44e3c265fed338cb03f1bf}{ltem\+\_\+set\+Default\+Network}} (uint8\+\_\+t pdp\+Context\+Id, const char $\ast$proto\+Type, const char $\ast$apn)
\begin{DoxyCompactList}\small\item\em Build default data context configuration for modem to use on startup. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc_8h_a0a45070f83b22dff7981905eb4c41560}{ltem\+\_\+start}} (reset\+Action\+\_\+t reset\+Action)
\begin{DoxyCompactList}\small\item\em Power on and start the modem. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc_8h_a5fde19665106d68b37d5d3161a9f3560}{ltem\+\_\+stop}} ()
\begin{DoxyCompactList}\small\item\em Powers off the modem without destroying memory objects. Power modem back on with \mbox{\hyperlink{ltemc_8h_a0a45070f83b22dff7981905eb4c41560}{ltem\+\_\+start()}} \end{DoxyCompactList}\item 
\mbox{\Hypertarget{ltemc_8h_ab25d4e8fc01bf95b8b6f6519da6c6612}\label{ltemc_8h_ab25d4e8fc01bf95b8b6f6519da6c6612}} 
void {\bfseries ltem\+\_\+reset} (bool hard\+Reset)
\begin{DoxyCompactList}\small\item\em Performs a reset of LTEm. \end{DoxyCompactList}\item 
const char $\ast$ \mbox{\hyperlink{ltemc_8h_a7029464993e485f079fa13a9891a391b}{ltem\+\_\+get\+Sw\+Version}} ()
\begin{DoxyCompactList}\small\item\em Get the LTEmC software version. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ltemc-types_8h_aa8cc0cd14abcf26157f9aae9974e9643}{device\+State\+\_\+t}} \mbox{\hyperlink{ltemc_8h_a8d7012de7962fc1187bfd0a5b3f8913e}{ltem\+\_\+get\+Device\+State}} ()
\begin{DoxyCompactList}\small\item\em Reads the hardware status and internal application ready field to return device ready state. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{ltemc_8h_a68e6ef9250a50c92aaa8297db3a5085f}\label{ltemc_8h_a68e6ef9250a50c92aaa8297db3a5085f}} 
void {\bfseries ltem\+\_\+event\+Mgr} ()
\begin{DoxyCompactList}\small\item\em Background work task runner. To be called in application Loop() periodically. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc_8h_aedccf53a5146b52d7a2a6d77be935ef5}{ltem\+\_\+set\+Yield\+Callback}} (yield\+\_\+func yield\+CB)
\begin{DoxyCompactList}\small\item\em Registers the address (void$\ast$) of your application yield callback handler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc_8h_a49b14b94f2a03a1a926f53aaa6fffc39}{ltem\+\_\+set\+Event\+Notif\+Callback}} (app\+Evnt\+Notify\+\_\+func event\+Notify\+CB)
\begin{DoxyCompactList}\small\item\em Registers the address (void$\ast$) of your application event notification callback handler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ltemc_8h_a80df97bbc632eda7178e56368c3d0a1e}{ltem\+\_\+notify\+App}} (uint8\+\_\+t notify\+Type, const char $\ast$notify\+Msg)
\begin{DoxyCompactList}\small\item\em Function of last resort, catastrophic failure Background work task runner. To be called in application Loop() periodically. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\DoxyHorRuler{0}


\begin{DoxyAuthor}{Author}
Greg Terrell, Loo\+UQ Incorporated
\end{DoxyAuthor}
{\bfseries{Loo\+UQ Incorporated}}~\newline
\href{mailto:answers@loouq.com}{\texttt{ answers@loouq.\+com}}~\newline
807 Airport Access Road, Suite 201, Traverse City, MI 49686 USA~\newline
~\newline
Copyright (c) 2020-\/2023 Loo\+UQ Incorporated.~\newline
This project is released under the GPL-\/3.\+0 License.

\DoxyHorRuler{0}
 \begin{DoxyVerb}This project is released under the GPL-3.0 License.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.
\end{DoxyVerb}
 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{ltemc_8h_a35606fbdda9e7b1a8c29e14cf554f4e9}\label{ltemc_8h_a35606fbdda9e7b1a8c29e14cf554f4e9}} 
\index{ltemc.h@{ltemc.h}!ltem\_create@{ltem\_create}}
\index{ltem\_create@{ltem\_create}!ltemc.h@{ltemc.h}}
\doxysubsubsection{\texorpdfstring{ltem\_create()}{ltem\_create()}}
{\footnotesize\ttfamily void ltem\+\_\+create (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structltem_pin_config__tag}{ltem\+Pin\+Config\+\_\+t}}}]{ltem\+\_\+config,  }\item[{yield\+\_\+func}]{yield\+Callback,  }\item[{app\+Evnt\+Notify\+\_\+func}]{event\+Notif\+Callback }\end{DoxyParamCaption})}



ASSERT and diagnostic data collection. 

Loo\+UQ embedded device library typedefs, common across products/libraries type definitions for LTEm device driver\+: LTEmC platform abstractions (arduino, etc.) command processor interface modem information cellular provider and packet network ~\newline


Initialize the LTEm1 modem. 
\begin{DoxyParams}{Parameters}
{\em ltem\+\_\+config} & \mbox{[}in\mbox{]} -\/ The LTE modem gpio pin configuration. \\
\hline
{\em application\+Callback} & \mbox{[}in\mbox{]} -\/ If supplied (not NULL), this function will be invoked for significant LTEm events.\\
\hline
\end{DoxyParams}
ASSERT and diagnostic data collection. \mbox{\Hypertarget{ltemc_8h_a8d7012de7962fc1187bfd0a5b3f8913e}\label{ltemc_8h_a8d7012de7962fc1187bfd0a5b3f8913e}} 
\index{ltemc.h@{ltemc.h}!ltem\_getDeviceState@{ltem\_getDeviceState}}
\index{ltem\_getDeviceState@{ltem\_getDeviceState}!ltemc.h@{ltemc.h}}
\doxysubsubsection{\texorpdfstring{ltem\_getDeviceState()}{ltem\_getDeviceState()}}
{\footnotesize\ttfamily \mbox{\hyperlink{ltemc-types_8h_aa8cc0cd14abcf26157f9aae9974e9643}{device\+State\+\_\+t}} ltem\+\_\+get\+Device\+State (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Reads the hardware status and internal application ready field to return device ready state. 

\begin{DoxyReturn}{Returns}
Device\+State\+: 0=power off, 1=power on, 2=appl ready
\end{DoxyReturn}
Reads the hardware status and internal application ready field to return device ready state. \mbox{\Hypertarget{ltemc_8h_a7029464993e485f079fa13a9891a391b}\label{ltemc_8h_a7029464993e485f079fa13a9891a391b}} 
\index{ltemc.h@{ltemc.h}!ltem\_getSwVersion@{ltem\_getSwVersion}}
\index{ltem\_getSwVersion@{ltem\_getSwVersion}!ltemc.h@{ltemc.h}}
\doxysubsubsection{\texorpdfstring{ltem\_getSwVersion()}{ltem\_getSwVersion()}}
{\footnotesize\ttfamily const char $\ast$ ltem\+\_\+get\+Sw\+Version (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Get the LTEmC software version. 

\begin{DoxyReturn}{Returns}
Version as a const char pointer. 
\end{DoxyReturn}
\mbox{\Hypertarget{ltemc_8h_a80df97bbc632eda7178e56368c3d0a1e}\label{ltemc_8h_a80df97bbc632eda7178e56368c3d0a1e}} 
\index{ltemc.h@{ltemc.h}!ltem\_notifyApp@{ltem\_notifyApp}}
\index{ltem\_notifyApp@{ltem\_notifyApp}!ltemc.h@{ltemc.h}}
\doxysubsubsection{\texorpdfstring{ltem\_notifyApp()}{ltem\_notifyApp()}}
{\footnotesize\ttfamily void ltem\+\_\+notify\+App (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{notify\+Type,  }\item[{const char $\ast$}]{notify\+Msg }\end{DoxyParamCaption})}



Function of last resort, catastrophic failure Background work task runner. To be called in application Loop() periodically. 


\begin{DoxyParams}{Parameters}
{\em notify\+Type} & \mbox{[}in\mbox{]} -\/ Enum of broad notification categories. \\
\hline
{\em notify\+Msg} & \mbox{[}in\mbox{]} -\/ Message from origination about the issue being reported.\\
\hline
\end{DoxyParams}
Function of last resort, catastrophic failure Background work task runner. To be called in application Loop() periodically. \mbox{\Hypertarget{ltemc_8h_ad8518289ac44e3c265fed338cb03f1bf}\label{ltemc_8h_ad8518289ac44e3c265fed338cb03f1bf}} 
\index{ltemc.h@{ltemc.h}!ltem\_setDefaultNetwork@{ltem\_setDefaultNetwork}}
\index{ltem\_setDefaultNetwork@{ltem\_setDefaultNetwork}!ltemc.h@{ltemc.h}}
\doxysubsubsection{\texorpdfstring{ltem\_setDefaultNetwork()}{ltem\_setDefaultNetwork()}}
{\footnotesize\ttfamily void ltem\+\_\+set\+Default\+Network (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{pdp\+Context\+Id,  }\item[{const char $\ast$}]{proto\+Type,  }\item[{const char $\ast$}]{apn }\end{DoxyParamCaption})}



Build default data context configuration for modem to use on startup. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em cntxt\+Id} & The context ID to operate on. Typically 0 or 1 \\
\hline
\mbox{\texttt{ in}}  & {\em proto\+Type} & The PDP protocol IPV4, IPV6, IPV4\+V6 (both). \\
\hline
\mbox{\texttt{ in}}  & {\em apn} & The APN name if required by network carrier. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc_8h_a49b14b94f2a03a1a926f53aaa6fffc39}\label{ltemc_8h_a49b14b94f2a03a1a926f53aaa6fffc39}} 
\index{ltemc.h@{ltemc.h}!ltem\_setEventNotifCallback@{ltem\_setEventNotifCallback}}
\index{ltem\_setEventNotifCallback@{ltem\_setEventNotifCallback}!ltemc.h@{ltemc.h}}
\doxysubsubsection{\texorpdfstring{ltem\_setEventNotifCallback()}{ltem\_setEventNotifCallback()}}
{\footnotesize\ttfamily void ltem\+\_\+set\+Event\+Notif\+Callback (\begin{DoxyParamCaption}\item[{app\+Evnt\+Notify\+\_\+func}]{event\+Notif\+Callback }\end{DoxyParamCaption})}



Registers the address (void$\ast$) of your application event notification callback handler. 


\begin{DoxyParams}{Parameters}
{\em event\+Notif\+Callback} & \mbox{[}in\mbox{]} Callback function in application code to be invoked when LTEmC is in await section.\\
\hline
\end{DoxyParams}
Registers the address (void$\ast$) of your application event notification callback handler. \mbox{\Hypertarget{ltemc_8h_a073f88d1a0dd729ca7d2061392e3ccee}\label{ltemc_8h_a073f88d1a0dd729ca7d2061392e3ccee}} 
\index{ltemc.h@{ltemc.h}!ltem\_setIotMode@{ltem\_setIotMode}}
\index{ltem\_setIotMode@{ltem\_setIotMode}!ltemc.h@{ltemc.h}}
\doxysubsubsection{\texorpdfstring{ltem\_setIotMode()}{ltem\_setIotMode()}}
{\footnotesize\ttfamily void ltem\+\_\+set\+Iot\+Mode (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-types_8h_ac8e908eadfb655392c2a198d9738575e}{ntwk\+Iot\+Mode\+\_\+t}}}]{mode }\end{DoxyParamCaption})}



Configure the network category to be searched under LTE RAT. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em iot\+Mode} & Enum specifying the LTE LPWAN protocol(s) to scan; 0=LTE M1,1=LTE NB1,2=LTE M1 and NB1 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc_8h_a31dd953d011be34d9a89de070e103794}\label{ltemc_8h_a31dd953d011be34d9a89de070e103794}} 
\index{ltemc.h@{ltemc.h}!ltem\_setProviderScanMode@{ltem\_setProviderScanMode}}
\index{ltem\_setProviderScanMode@{ltem\_setProviderScanMode}!ltemc.h@{ltemc.h}}
\doxysubsubsection{\texorpdfstring{ltem\_setProviderScanMode()}{ltem\_setProviderScanMode()}}
{\footnotesize\ttfamily void ltem\+\_\+set\+Provider\+Scan\+Mode (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ltemc-types_8h_a8e9d1f53c1e7c1c59f08200324201cc2}{ntwk\+Scan\+Mode\+\_\+t}}}]{mode }\end{DoxyParamCaption})}



Configure RAT(s) allowed to be searched. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em scan\+Mode} & Enum specifying what cell network to scan; 0=Automatic,1=GSM only,3=LTE only \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc_8h_a0213559f7f2aa79fdb75f7b07e943ba3}\label{ltemc_8h_a0213559f7f2aa79fdb75f7b07e943ba3}} 
\index{ltemc.h@{ltemc.h}!ltem\_setProviderScanSeq@{ltem\_setProviderScanSeq}}
\index{ltem\_setProviderScanSeq@{ltem\_setProviderScanSeq}!ltemc.h@{ltemc.h}}
\doxysubsubsection{\texorpdfstring{ltem\_setProviderScanSeq()}{ltem\_setProviderScanSeq()}}
{\footnotesize\ttfamily void ltem\+\_\+set\+Provider\+Scan\+Seq (\begin{DoxyParamCaption}\item[{const char $\ast$}]{sequence }\end{DoxyParamCaption})}



Configure RAT searching sequence. 

Example\+: scan\+Sequence = \char`\"{}020301\char`\"{} represents\+: search LTE-\/\+M1, then LTE-\/\+NB1, then GSM 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em scan\+Sequence} & Character string specifying the RAT scanning order; 00=Automatic\mbox{[}LTE-\/\+M1$\vert$\+LTE-\/\+NB1$\vert$\+GSM\mbox{]},01=GSM,02=LTE-\/\+M1,03=LTE-\/\+NB1 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc_8h_aedccf53a5146b52d7a2a6d77be935ef5}\label{ltemc_8h_aedccf53a5146b52d7a2a6d77be935ef5}} 
\index{ltemc.h@{ltemc.h}!ltem\_setYieldCallback@{ltem\_setYieldCallback}}
\index{ltem\_setYieldCallback@{ltem\_setYieldCallback}!ltemc.h@{ltemc.h}}
\doxysubsubsection{\texorpdfstring{ltem\_setYieldCallback()}{ltem\_setYieldCallback()}}
{\footnotesize\ttfamily void ltem\+\_\+set\+Yield\+Callback (\begin{DoxyParamCaption}\item[{yield\+\_\+func}]{yield\+CB }\end{DoxyParamCaption})}



Registers the address (void$\ast$) of your application yield callback handler. 


\begin{DoxyParams}{Parameters}
{\em yield\+Callback} & \mbox{[}in\mbox{]} Callback function in application code to be invoked when LTEmC is in await section. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ltemc_8h_a0a45070f83b22dff7981905eb4c41560}\label{ltemc_8h_a0a45070f83b22dff7981905eb4c41560}} 
\index{ltemc.h@{ltemc.h}!ltem\_start@{ltem\_start}}
\index{ltem\_start@{ltem\_start}!ltemc.h@{ltemc.h}}
\doxysubsubsection{\texorpdfstring{ltem\_start()}{ltem\_start()}}
{\footnotesize\ttfamily void ltem\+\_\+start (\begin{DoxyParamCaption}\item[{reset\+Action\+\_\+t}]{reset\+Action }\end{DoxyParamCaption})}



Power on and start the modem. 


\begin{DoxyParams}{Parameters}
{\em reset\+If\+Powered\+On} & \mbox{[}in\mbox{]} Perform a software reset on the modem, if found in a powered on state\\
\hline
\end{DoxyParams}
Power on and start the modem. \mbox{\Hypertarget{ltemc_8h_a5fde19665106d68b37d5d3161a9f3560}\label{ltemc_8h_a5fde19665106d68b37d5d3161a9f3560}} 
\index{ltemc.h@{ltemc.h}!ltem\_stop@{ltem\_stop}}
\index{ltem\_stop@{ltem\_stop}!ltemc.h@{ltemc.h}}
\doxysubsubsection{\texorpdfstring{ltem\_stop()}{ltem\_stop()}}
{\footnotesize\ttfamily void ltem\+\_\+stop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Powers off the modem without destroying memory objects. Power modem back on with \mbox{\hyperlink{ltemc_8h_a0a45070f83b22dff7981905eb4c41560}{ltem\+\_\+start()}} 

Powers off the modem without destroying memory objects. Power modem back on with \mbox{\hyperlink{ltemc_8h_a0a45070f83b22dff7981905eb4c41560}{ltem\+\_\+start()}} 